<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Service精通 · Android新手入门</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GBook 2.0.1">
        <meta name="author" content="深情小建">        
        <link rel="stylesheet" href="../../gbook/style.css">
        <link rel="stylesheet" href="../../gbook/gbook-plugin-back-to-top/plugin.css">
        <link rel="stylesheet" href="../../gbook/gbook-plugin-pagefooter/footer.css">
        <link rel="stylesheet" href="../../gbook/gbook-plugin-highlight/website.css">
        <link rel="stylesheet" href="../../gbook/gbook-plugin-search/search.css">
        <link rel="stylesheet" href="../../gbook/gbook-plugin-fontsettings/website.css">

    
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gbook/images/favicon.ico" type="image/x-icon">

        <link rel="next" href="broadcastreceiver.html" />
        <link rel="prev" href="service2.html" />
    </head>

    <body>
<div class="book">
    <!-- 左侧-start -->
    <div class="book-summary">
        <!-- 搜索 -->
        <div id="book-search-input" role="search">
            <input type="text" placeholder="输入并搜索" />
        </div>

        <!-- 左侧导航-start -->
        <nav role="navigation">
        <ul class="summary">
            <li><a href="https://android.54dxs.cn/interview/index.html" target="_blank" class="custom-link">54大学生[Android频道][面试指南]</a></li>
            <li><a href="https://android.54dxs.cn/rookie/index.html" target="_blank" class="custom-link">54大学生[Android频道][新手入门]</a></li>
            <li><a href="https://android.54dxs.cn/advanced/index.html" target="_blank" class="custom-link">54大学生[Android频道][进阶之光]</a></li>
            <li><a href="https://android.54dxs.cn/project/index.html" target="_blank" class="custom-link">54大学生[Android频道][项目实战]</a></li>

            <li class="divider"></li>

            <li class="header">一、前言</li>
            <li class="chapter " data-level="1.1" data-path="../../"><a href="../../"><b>1.1.</b>介绍</a>
            </li>

            <li class="header">二、Android开发准备</li>
            <li class="chapter " data-level="2.1" data-path="../ready/intro.html"><a href="../ready/intro.html"><b>2.1.</b>Android基础入门教程</a>
            </li><li class="chapter " data-level="2.2" data-path="../ready/system-architecture-analysis.html"><a href="../ready/system-architecture-analysis.html"><b>2.2.</b>背景相关与系统架构分析</a>
            </li><li class="chapter " data-level="2.3" data-path="../ready/development-environment-build.html"><a href="../ready/development-environment-build.html"><b>2.3.</b>开发环境搭建</a>
                <ul class="articles"><li class="chapter " data-level="2.3.1" data-path="../ready/eclipse-adt-sdk-app.html"><a href="../ready/eclipse-adt-sdk-app.html"><b>2.3.1.</b>使用Eclipse + ADT + SDK开发Android APP</a>
            </li><li class="chapter " data-level="2.3.2" data-path="../ready/android-studio.html"><a href="../ready/android-studio.html"><b>2.3.2.</b>使用Android Studio开发Android APP</a>
            </li></ul>            </li><li class="chapter " data-level="2.4" data-path="../ready/sdk-problem-solve.html"><a href="../ready/sdk-problem-solve.html"><b>2.4.</b>SDK更新不了问题解决</a>
            </li><li class="chapter " data-level="2.5" data-path="../ready/genymotion-install.html"><a href="../ready/genymotion-install.html"><b>2.5.</b>Genymotion模拟器安装</a>
            </li><li class="chapter " data-level="2.6" data-path="../ready/git.html"><a href="../ready/git.html"><b>2.6.</b>Git</a>
                <ul class="articles"><li class="chapter " data-level="2.6.1" data-path="../ready/git-repo-operate.html"><a href="../ready/git-repo-operate.html"><b>2.6.1.</b>Git使用教程之本地仓库的基本操作</a>
            </li><li class="chapter " data-level="2.6.2" data-path="../ready/git-repo-create.html"><a href="../ready/git-repo-create.html"><b>2.6.2.</b>Git之使用GitHub搭建远程仓库</a>
            </li></ul>            </li><li class="chapter " data-level="2.7" data-path="../ready/9png.html"><a href="../ready/9png.html"><b>2.7.</b>.9png图</a>
            </li><li class="chapter " data-level="2.8" data-path="../ready/interface-design.html"><a href="../ready/interface-design.html"><b>2.8.</b>界面原型设计</a>
            </li><li class="chapter " data-level="2.9" data-path="../ready/project-src-analysis.html"><a href="../ready/project-src-analysis.html"><b>2.9.</b>工程相关解析(各种文件，资源访问)</a>
            </li><li class="chapter " data-level="2.10" data-path="../ready/sign-package.html"><a href="../ready/sign-package.html"><b>2.10.</b>Android程序签名打包</a>
            </li><li class="chapter " data-level="2.11" data-path="../ready/decompile-apk-get-code-resources.html"><a href="../ready/decompile-apk-get-code-resources.html"><b>2.11.</b>反编译APK获取代码&资源</a>
            </li>

            <li class="header">三、Android控件使用</li>
            <li class="chapter " data-level="3.1" data-path="../widget/view-viewgroup-intro.html"><a href="../widget/view-viewgroup-intro.html"><b>3.1.</b>View与ViewGroup的概念</a>
            </li><li class="chapter " data-level="3.2" data-path="../widget/layout.html"><a href="../widget/layout.html"><b>3.2.</b>布局</a>
                <ul class="articles"><li class="chapter " data-level="3.2.1" data-path="../widget/linearlayout.html"><a href="../widget/linearlayout.html"><b>3.2.1.</b>LinearLayout(线性布局)</a>
            </li><li class="chapter " data-level="3.2.2" data-path="../widget/relativelayout.html"><a href="../widget/relativelayout.html"><b>3.2.2.</b>RelativeLayout(相对布局)</a>
            </li><li class="chapter " data-level="3.2.3" data-path="../widget/tablelayout.html"><a href="../widget/tablelayout.html"><b>3.2.3.</b>TableLayout(表格布局)</a>
            </li><li class="chapter " data-level="3.2.4" data-path="../widget/framelayout.html"><a href="../widget/framelayout.html"><b>3.2.4.</b>FrameLayout(帧布局)</a>
            </li><li class="chapter " data-level="3.2.5" data-path="../widget/gridlayout.html"><a href="../widget/gridlayout.html"><b>3.2.5.</b>GridLayout(网格布局)</a>
            </li><li class="chapter " data-level="3.2.6" data-path="../widget/absolutelayout.html"><a href="../widget/absolutelayout.html"><b>3.2.6.</b>AbsoluteLayout(绝对布局)</a>
            </li></ul>            </li><li class="chapter " data-level="3.3" data-path="../widget/widget.html"><a href="../widget/widget.html"><b>3.3.</b>基础控件</a>
                <ul class="articles"><li class="chapter " data-level="3.3.1" data-path="../widget/textview.html"><a href="../widget/textview.html"><b>3.3.1.</b>TextView(文本框)详解</a>
            </li><li class="chapter " data-level="3.3.2" data-path="../widget/edittext.html"><a href="../widget/edittext.html"><b>3.3.2.</b>EditText(输入框)详解</a>
            </li><li class="chapter " data-level="3.3.3" data-path="../widget/button-imagebutton.html"><a href="../widget/button-imagebutton.html"><b>3.3.3.</b>Button(按钮)与ImageButton(图像按钮)</a>
            </li><li class="chapter " data-level="3.3.4" data-path="../widget/imageview.html"><a href="../widget/imageview.html"><b>3.3.4.</b>ImageView(图像视图)</a>
            </li><li class="chapter " data-level="3.3.5" data-path="../widget/radiobutton-checkbox.html"><a href="../widget/radiobutton-checkbox.html"><b>3.3.5.</b>RadioButton(单选按钮)和Checkbox(复选框)</a>
            </li><li class="chapter " data-level="3.3.6" data-path="../widget/togglebutton-switch.html"><a href="../widget/togglebutton-switch.html"><b>3.3.6.</b>开关按钮ToggleButton和开关Switch</a>
            </li><li class="chapter " data-level="3.3.7" data-path="../widget/progressbar.html"><a href="../widget/progressbar.html"><b>3.3.7.</b>ProgressBar(进度条)</a>
            </li><li class="chapter " data-level="3.3.8" data-path="../widget/seekbar.html"><a href="../widget/seekbar.html"><b>3.3.8.</b>SeekBar(拖动条)</a>
            </li><li class="chapter " data-level="3.3.9" data-path="../widget/ratingbar.html"><a href="../widget/ratingbar.html"><b>3.3.9.</b>RatingBar(星级评分条)</a>
            </li></ul>            </li><li class="chapter " data-level="3.4" data-path="../widget/widget2.html"><a href="../widget/widget2.html"><b>3.4.</b>复杂控件</a>
                <ul class="articles"><li class="chapter " data-level="3.4.1" data-path="../widget/scrollview.html"><a href="../widget/scrollview.html"><b>3.4.1.</b>ScrollView(滚动条)</a>
            </li><li class="chapter " data-level="3.4.2" data-path="../widget/date-time-1.html"><a href="../widget/date-time-1.html"><b>3.4.2.</b>Date和Time控件(1)</a>
            </li><li class="chapter " data-level="3.4.3" data-path="../widget/date-time-2.html"><a href="../widget/date-time-2.html"><b>3.4.3.</b>Date和Time控件(2)</a>
            </li><li class="chapter " data-level="3.4.4" data-path="../widget/adapter.html"><a href="../widget/adapter.html"><b>3.4.4.</b>Adapter基础讲解</a>
            </li><li class="chapter " data-level="3.4.5" data-path="../widget/listview.html"><a href="../widget/listview.html"><b>3.4.5.</b>ListView简单使用</a>
            </li><li class="chapter " data-level="3.4.6" data-path="../widget/baseadapter.html"><a href="../widget/baseadapter.html"><b>3.4.6.</b>BaseAdapter优化</a>
            </li><li class="chapter " data-level="3.4.7" data-path="../widget/listview-focus.html"><a href="../widget/listview-focus.html"><b>3.4.7.</b>ListView的焦点问题</a>
            </li><li class="chapter " data-level="3.4.8" data-path="../widget/listview-checkbox.html"><a href="../widget/listview-checkbox.html"><b>3.4.8.</b>ListView之checkbox错位问题解决</a>
            </li><li class="chapter " data-level="3.4.9" data-path="../widget/listview-update.html"><a href="../widget/listview-update.html"><b>3.4.9.</b>ListView的数据更新问题</a>
            </li></ul>            </li><li class="chapter " data-level="3.5" data-path="../widget/widget3.html"><a href="../widget/widget3.html"><b>3.5.</b>高阶控件</a>
                <ul class="articles"><li class="chapter " data-level="3.5.1" data-path="../widget/customer-baseadapter.html"><a href="../widget/customer-baseadapter.html"><b>3.5.1.</b>构建一个可复用的自定义BaseAdapter</a>
            </li><li class="chapter " data-level="3.5.2" data-path="../widget/listview-item.html"><a href="../widget/listview-item.html"><b>3.5.2.</b>ListView Item多布局的实现</a>
            </li><li class="chapter " data-level="3.5.3" data-path="../widget/gridview.html"><a href="../widget/gridview.html"><b>3.5.3.</b>GridView(网格视图)的基本使用</a>
            </li><li class="chapter " data-level="3.5.4" data-path="../widget/spinner.html"><a href="../widget/spinner.html"><b>3.5.4.</b>Spinner(列表选项框)的基本使用</a>
            </li><li class="chapter " data-level="3.5.5" data-path="../widget/autocompletetextview.html"><a href="../widget/autocompletetextview.html"><b>3.5.5.</b>AutoCompleteTextView(自动完成文本框)的基本使用</a>
            </li><li class="chapter " data-level="3.5.6" data-path="../widget/expandablelistview.html"><a href="../widget/expandablelistview.html"><b>3.5.6.</b>ExpandableListView(可折叠列表)的基本使用</a>
            </li><li class="chapter " data-level="3.5.7" data-path="../widget/viewflipper.html"><a href="../widget/viewflipper.html"><b>3.5.7.</b>ViewFlipper(翻转视图)的基本使用</a>
            </li><li class="chapter " data-level="3.5.8" data-path="../widget/toast.html"><a href="../widget/toast.html"><b>3.5.8.</b>Toast(吐司)的基本使用</a>
            </li><li class="chapter " data-level="3.5.9" data-path="../widget/notification.html"><a href="../widget/notification.html"><b>3.5.9.</b>Notification(状态栏通知)详解</a>
            </li><li class="chapter " data-level="3.5.10" data-path="../widget/alertdialog.html"><a href="../widget/alertdialog.html"><b>3.5.10.</b>AlertDialog(对话框)详解</a>
            </li></ul>            </li><li class="chapter " data-level="3.6" data-path="../widget/widget4.html"><a href="../widget/widget4.html"><b>3.6.</b>窗体控件</a>
                <ul class="articles"><li class="chapter " data-level="3.6.1" data-path="../widget/dialog.html"><a href="../widget/dialog.html"><b>3.6.1.</b>其他几种常用对话框基本使用</a>
            </li><li class="chapter " data-level="3.6.2" data-path="../widget/popupwindow.html"><a href="../widget/popupwindow.html"><b>3.6.2.</b>PopupWindow(悬浮框)的基本使用</a>
            </li><li class="chapter " data-level="3.6.3" data-path="../widget/menu.html"><a href="../widget/menu.html"><b>3.6.3.</b>菜单(Menu)</a>
            </li><li class="chapter " data-level="3.6.4" data-path="../widget/viewpager.html"><a href="../widget/viewpager.html"><b>3.6.4.</b>ViewPager的简单使用</a>
            </li><li class="chapter " data-level="3.6.5" data-path="../widget/drawerlayout.html"><a href="../widget/drawerlayout.html"><b>3.6.5.</b>DrawerLayout(官方侧滑菜单)的简单使用</a>
            </li></ul>            </li>

            <li class="header">四、Android事件浅析</li>
            <li class="chapter " data-level="4.1" data-path="../event/listen-event-handle.html"><a href="../event/listen-event-handle.html"><b>4.1.</b>基于监听的事件处理机制</a>
            </li><li class="chapter " data-level="4.2" data-path="../event/callback-event-handle.html"><a href="../event/callback-event-handle.html"><b>4.2.</b>基于回调的事件处理机制</a>
            </li><li class="chapter " data-level="4.3" data-path="../event/handler-message.html"><a href="../event/handler-message.html"><b>4.3.</b>Handler消息传递机制浅析</a>
            </li><li class="chapter " data-level="4.4" data-path="../event/touchlistener-ontouchevent.html"><a href="../event/touchlistener-ontouchevent.html"><b>4.4.</b>TouchListener PK OnTouchEvent + 多点触碰</a>
            </li><li class="chapter " data-level="4.5" data-path="../event/listener-edittext-change.html"><a href="../event/listener-edittext-change.html"><b>4.5.</b>监听EditText的内容变化</a>
            </li><li class="chapter " data-level="4.6" data-path="../event/configuration.html"><a href="../event/configuration.html"><b>4.6.</b>响应系统设置的事件(Configuration类)</a>
            </li><li class="chapter " data-level="4.7" data-path="../event/ansynctask.html"><a href="../event/ansynctask.html"><b>4.7.</b>AnsyncTask异步任务</a>
            </li><li class="chapter " data-level="4.8" data-path="../event/gestures.html"><a href="../event/gestures.html"><b>4.8.</b>Gestures(手势)</a>
            </li>

            <li class="header">五、Android四大组件</li>
            <li class="chapter " data-level="5.1" data-path="activity.html"><a href="activity.html"><b>5.1.</b>Activity</a>
                <ul class="articles"><li class="chapter " data-level="5.1.1" data-path="activity2.html"><a href="activity2.html"><b>5.1.1.</b>Activity初学乍练</a>
            </li><li class="chapter " data-level="5.1.2" data-path="activity-start.html"><a href="activity-start.html"><b>5.1.2.</b>Activity初窥门径</a>
            </li><li class="chapter " data-level="5.1.3" data-path="activity-intro.html"><a href="activity-intro.html"><b>5.1.3.</b>Activity登堂入室</a>
            </li></ul>            </li><li class="chapter " data-level="5.2" data-path="service.html"><a href="service.html"><b>5.2.</b>Service</a>
                <ul class="articles"><li class="chapter " data-level="5.2.1" data-path="service1.html"><a href="service1.html"><b>5.2.1.</b>Service初涉</a>
            </li><li class="chapter " data-level="5.2.2" data-path="service2.html"><a href="service2.html"><b>5.2.2.</b>Service进阶</a>
            </li><li class="chapter active" data-level="5.2.3" data-path="service3.html"><a href="service3.html"><b>5.2.3.</b>Service精通</a>
            </li></ul>            </li><li class="chapter " data-level="5.3" data-path="broadcastreceiver.html"><a href="broadcastreceiver.html"><b>5.3.</b>BroadcastReceiver</a>
                <ul class="articles"><li class="chapter " data-level="5.3.1" data-path="broadcastreceiver1.html"><a href="broadcastreceiver1.html"><b>5.3.1.</b>BroadcastReceiver牛刀小试</a>
            </li><li class="chapter " data-level="5.3.2" data-path="broadcastreceiver2.html"><a href="broadcastreceiver2.html"><b>5.3.2.</b>BroadcastReceiver庖丁解牛</a>
            </li></ul>            </li><li class="chapter " data-level="5.4" data-path="contentprovider.html"><a href="contentprovider.html"><b>5.4.</b>ContentProvider</a>
                <ul class="articles"><li class="chapter " data-level="5.4.1" data-path="contentprovider1.html"><a href="contentprovider1.html"><b>5.4.1.</b>ContentProvider初探</a>
            </li><li class="chapter " data-level="5.4.2" data-path="contentprovider2.html"><a href="contentprovider2.html"><b>5.4.2.</b>ContentProvider再探——Document Provider</a>
            </li></ul>            </li><li class="chapter " data-level="5.5" data-path="intent.html"><a href="intent.html"><b>5.5.</b>Intent</a>
                <ul class="articles"><li class="chapter " data-level="5.5.1" data-path="intent-base.html"><a href="intent-base.html"><b>5.5.1.</b>Intent的基本使用</a>
            </li><li class="chapter " data-level="5.5.2" data-path="intent-pass-data.html"><a href="intent-pass-data.html"><b>5.5.2.</b>Intent之复杂数据的传递</a>
            </li></ul>            </li>

            <li class="header">六、Android之Fragment</li>
            <li class="chapter " data-level="6.1" data-path="../fragment/fragment-base.html"><a href="../fragment/fragment-base.html"><b>6.1.</b>Fragment基本概述</a>
            </li><li class="chapter " data-level="6.2" data-path="../fragment/fragment-demo.html"><a href="../fragment/fragment-demo.html"><b>6.2.</b>Fragment实例精讲</a>
                <ul class="articles"><li class="chapter " data-level="6.2.1" data-path="../fragment/fragment-demo1.html"><a href="../fragment/fragment-demo1.html"><b>6.2.1.</b>底部导航栏的实现(方法1)</a>
            </li><li class="chapter " data-level="6.2.2" data-path="../fragment/fragment-demo2.html"><a href="../fragment/fragment-demo2.html"><b>6.2.2.</b>底部导航栏的实现(方法2)</a>
            </li><li class="chapter " data-level="6.2.3" data-path="../fragment/fragment-demo3.html"><a href="../fragment/fragment-demo3.html"><b>6.2.3.</b>底部导航栏的实现(方法3)</a>
            </li><li class="chapter " data-level="6.2.4" data-path="../fragment/fragment-demo4.html"><a href="../fragment/fragment-demo4.html"><b>6.2.4.</b>底部导航栏+ViewPager滑动切换页面</a>
            </li><li class="chapter " data-level="6.2.5" data-path="../fragment/fragment-demo5.html"><a href="../fragment/fragment-demo5.html"><b>6.2.5.</b>新闻(购物)类App列表Fragment的简单实现</a>
            </li></ul>            </li>

            <li class="header">七、Android数据存储</li>
            <li class="chapter " data-level="7.1" data-path="../store/file.html"><a href="../store/file.html"><b>7.1.</b>文件存储读写</a>
            </li><li class="chapter " data-level="7.2" data-path="../store/sharedpreferences.html"><a href="../store/sharedpreferences.html"><b>7.2.</b>SharedPreferences保存用户偏好参数</a>
            </li><li class="chapter " data-level="7.3" data-path="../store/sqlite.html"><a href="../store/sqlite.html"><b>7.3.</b>SQLite数据库</a>
                <ul class="articles"><li class="chapter " data-level="7.3.1" data-path="../store/sqlite1.html"><a href="../store/sqlite1.html"><b>7.3.1.</b>初见SQLite数据库</a>
            </li><li class="chapter " data-level="7.3.2" data-path="../store/sqlite2.html"><a href="../store/sqlite2.html"><b>7.3.2.</b>又见SQLite数据库</a>
            </li></ul>            </li>

            <li class="header">八、Android网络通信</li>
            <li class="chapter " data-level="8.1" data-path="../network/http.html"><a href="../network/http.html"><b>8.1.</b>Http</a>
                <ul class="articles"><li class="chapter " data-level="8.1.1" data-path="../network/http-protocol.html"><a href="../network/http-protocol.html"><b>8.1.1.</b>Http协议</a>
            </li><li class="chapter " data-level="8.1.2" data-path="../network/http-response-header.html"><a href="../network/http-response-header.html"><b>8.1.2.</b>Http请求头与响应头</a>
            </li><li class="chapter " data-level="8.1.3" data-path="../network/httpurlconnection.html"><a href="../network/httpurlconnection.html"><b>8.1.3.</b>HttpURLConnection</a>
            </li><li class="chapter " data-level="8.1.4" data-path="../network/httpclient.html"><a href="../network/httpclient.html"><b>8.1.4.</b>HttpClient</a>
            </li></ul>            </li><li class="chapter " data-level="8.2" data-path="../network/dataparser.html"><a href="../network/dataparser.html"><b>8.2.</b>数据解析</a>
                <ul class="articles"><li class="chapter " data-level="8.2.1" data-path="../network/xml.html"><a href="../network/xml.html"><b>8.2.1.</b>XML数据解析</a>
            </li><li class="chapter " data-level="8.2.2" data-path="../network/json.html"><a href="../network/json.html"><b>8.2.2.</b>JSON数据解析</a>
            </li></ul>            </li><li class="chapter " data-level="8.3" data-path="../network/upload-download.html"><a href="../network/upload-download.html"><b>8.3.</b>文件上传下载</a>
                <ul class="articles"><li class="chapter " data-level="8.3.1" data-path="../network/upload-file.html"><a href="../network/upload-file.html"><b>8.3.1.</b>文件上传</a>
            </li><li class="chapter " data-level="8.3.2" data-path="../network/download1.html"><a href="../network/download1.html"><b>8.3.2.</b>文件下载(1)</a>
            </li><li class="chapter " data-level="8.3.3" data-path="../network/download2.html"><a href="../network/download2.html"><b>8.3.3.</b>文件下载(2)</a>
            </li></ul>            </li><li class="chapter " data-level="8.4" data-path="../network/webservice.html"><a href="../network/webservice.html"><b>8.4.</b>调用WebService</a>
            </li><li class="chapter " data-level="8.5" data-path="../network/webview.html"><a href="../network/webview.html"><b>8.5.</b>WebView</a>
                <ul class="articles"><li class="chapter " data-level="8.5.1" data-path="../network/webview-base.html"><a href="../network/webview-base.html"><b>8.5.1.</b>基本用法</a>
            </li><li class="chapter " data-level="8.5.2" data-path="../network/webview-javascrip.html"><a href="../network/webview-javascrip.html"><b>8.5.2.</b>WebView和JavaScrip交互基础</a>
            </li><li class="chapter " data-level="8.5.3" data-path="../network/webview-attention.html"><a href="../network/webview-attention.html"><b>8.5.3.</b>Android4.4后WebView的一些注意事项</a>
            </li><li class="chapter " data-level="8.5.4" data-path="../network/webview-download-file.html"><a href="../network/webview-download-file.html"><b>8.5.4.</b>WebView文件下载</a>
            </li><li class="chapter " data-level="8.5.5" data-path="../network/webview-cache.html"><a href="../network/webview-cache.html"><b>8.5.5.</b>WebView缓存问题</a>
            </li><li class="chapter " data-level="8.5.6" data-path="../network/webview-error-code.html"><a href="../network/webview-error-code.html"><b>8.5.6.</b>WebView处理网页返回的错误码信息</a>
            </li></ul>            </li><li class="chapter " data-level="8.6" data-path="../network/socket.html"><a href="../network/socket.html"><b>8.6.</b>Socket</a>
                <ul class="articles"><li class="chapter " data-level="8.6.1" data-path="../network/socket-intro.html"><a href="../network/socket-intro.html"><b>8.6.1.</b>Socket学习网络基础准备</a>
            </li><li class="chapter " data-level="8.6.2" data-path="../network/tcp1.html"><a href="../network/tcp1.html"><b>8.6.2.</b>基于TCP协议的Socket通信(1)</a>
            </li><li class="chapter " data-level="8.6.3" data-path="../network/tcp2.html"><a href="../network/tcp2.html"><b>8.6.3.</b>基于TCP协议的Socket通信(2)</a>
            </li><li class="chapter " data-level="8.6.4" data-path="../network/udp.html"><a href="../network/udp.html"><b>8.6.4.</b>基于UDP协议的Socket通信</a>
            </li></ul>            </li>

            <li class="header">九、Android自定义控件</li>
            <li class="chapter " data-level="9.1" data-path="../custom/drawable.html"><a href="../custom/drawable.html"><b>9.1.</b>Android中的13种Drawable小结</a>
                <ul class="articles"><li class="chapter " data-level="9.1.1" data-path="../custom/drawable1.html"><a href="../custom/drawable1.html"><b>9.1.1.</b>Part 1</a>
            </li><li class="chapter " data-level="9.1.2" data-path="../custom/drawable2.html"><a href="../custom/drawable2.html"><b>9.1.2.</b>Part 2</a>
            </li><li class="chapter " data-level="9.1.3" data-path="../custom/drawable3.html"><a href="../custom/drawable3.html"><b>9.1.3.</b>Part 3</a>
            </li></ul>            </li><li class="chapter " data-level="9.2" data-path="../custom/bitmap.html"><a href="../custom/bitmap.html"><b>9.2.</b>Bitmap(位图)</a>
                <ul class="articles"><li class="chapter " data-level="9.2.1" data-path="../custom/bitmap1.html"><a href="../custom/bitmap1.html"><b>9.2.1.</b>Bitmap(位图)全解析</a>
            </li><li class="chapter " data-level="9.2.2" data-path="../custom/bitmap2.html"><a href="../custom/bitmap2.html"><b>9.2.2.</b>Bitmap引起的OOM问题</a>
            </li></ul>            </li><li class="chapter " data-level="9.3" data-path="../custom/canvas.html"><a href="../custom/canvas.html"><b>9.3.</b>Canvas(绘图)</a>
                <ul class="articles"><li class="chapter " data-level="9.3.1" data-path="../custom/drawable-tool.html"><a href="../custom/drawable-tool.html"><b>9.3.1.</b>三个绘图工具类详解</a>
            </li><li class="chapter " data-level="9.3.2" data-path="../custom/bitmap-demo.html"><a href="../custom/bitmap-demo.html"><b>9.3.2.</b>绘图类实战示例</a>
            </li><li class="chapter " data-level="9.3.3" data-path="../custom/maskfilter.html"><a href="../custom/maskfilter.html"><b>9.3.3.</b>Paint API之MaskFilter(面具)</a>
            </li><li class="chapter " data-level="9.3.4" data-path="../custom/xfermode-porterduff1.html"><a href="../custom/xfermode-porterduff1.html"><b>9.3.4.</b>Paint API之Xfermode与PorterDuff详解(1)</a>
            </li><li class="chapter " data-level="9.3.5" data-path="../custom/xfermode-porterduff2.html"><a href="../custom/xfermode-porterduff2.html"><b>9.3.5.</b>Paint API之Xfermode与PorterDuff详解(2)</a>
            </li><li class="chapter " data-level="9.3.6" data-path="../custom/xfermode-porterduff3.html"><a href="../custom/xfermode-porterduff3.html"><b>9.3.6.</b>Paint API之Xfermode与PorterDuff详解(3)</a>
            </li><li class="chapter " data-level="9.3.7" data-path="../custom/xfermode-porterduff4.html"><a href="../custom/xfermode-porterduff4.html"><b>9.3.7.</b>Paint API之Xfermode与PorterDuff详解(4)</a>
            </li><li class="chapter " data-level="9.3.8" data-path="../custom/xfermode-porterduff5.html"><a href="../custom/xfermode-porterduff5.html"><b>9.3.8.</b>Paint API之Xfermode与PorterDuff详解(5)</a>
            </li><li class="chapter " data-level="9.3.9" data-path="../custom/colorfilter1.html"><a href="../custom/colorfilter1.html"><b>9.3.9.</b>Paint API之ColorFilter(颜色过滤器)(1)</a>
            </li><li class="chapter " data-level="9.3.10" data-path="../custom/colorfilter2.html"><a href="../custom/colorfilter2.html"><b>9.3.10.</b>Paint API之ColorFilter(颜色过滤器)(2)</a>
            </li><li class="chapter " data-level="9.3.11" data-path="../custom/colorfilter3.html"><a href="../custom/colorfilter3.html"><b>9.3.11.</b>Paint API之ColorFilter(颜色过滤器)(3)</a>
            </li><li class="chapter " data-level="9.3.12" data-path="../custom/patheffect.html"><a href="../custom/patheffect.html"><b>9.3.12.</b>Paint API之PathEffect(路径效果)</a>
            </li><li class="chapter " data-level="9.3.13" data-path="../custom/shader.html"><a href="../custom/shader.html"><b>9.3.13.</b>Paint API之Shader(图像渲染)</a>
            </li><li class="chapter " data-level="9.3.14" data-path="../custom/shadowlayer.html"><a href="../custom/shadowlayer.html"><b>9.3.14.</b>Paint几个枚举常量值以及ShadowLayer阴影效果</a>
            </li><li class="chapter " data-level="9.3.15" data-path="../custom/typeface.html"><a href="../custom/typeface.html"><b>9.3.15.</b>Paint API之Typeface(字型)</a>
            </li><li class="chapter " data-level="9.3.16" data-path="../custom/canvas-api1.html"><a href="../custom/canvas-api1.html"><b>9.3.16.</b>Canvas API详解(1)</a>
            </li><li class="chapter " data-level="9.3.17" data-path="../custom/canvas-api2.html"><a href="../custom/canvas-api2.html"><b>9.3.17.</b>Canvas API详解(2)剪切方法合集</a>
            </li><li class="chapter " data-level="9.3.18" data-path="../custom/canvas-api3.html"><a href="../custom/canvas-api3.html"><b>9.3.18.</b>Canvas API详解(3)Matrix和drawBitmapMash</a>
            </li></ul>            </li><li class="chapter " data-level="9.4" data-path="../custom/animation.html"><a href="../custom/animation.html"><b>9.4.</b>Android动画</a>
                <ul class="articles"><li class="chapter " data-level="9.4.1" data-path="../custom/frameanimation.html"><a href="../custom/frameanimation.html"><b>9.4.1.</b>帧动画</a>
            </li><li class="chapter " data-level="9.4.2" data-path="../custom/tween.html"><a href="../custom/tween.html"><b>9.4.2.</b>补间动画</a>
            </li><li class="chapter " data-level="9.4.3" data-path="../custom/valueanimator1.html"><a href="../custom/valueanimator1.html"><b>9.4.3.</b>属性动画-初见</a>
            </li><li class="chapter " data-level="9.4.4" data-path="../custom/valueanimator2.html"><a href="../custom/valueanimator2.html"><b>9.4.4.</b>属性动画-又见</a>
            </li></ul>            </li>

            <li class="header">十、Android音视频</li>
            <li class="chapter " data-level="10.1" data-path="../video/soundpool.html"><a href="../video/soundpool.html"><b>10.1.</b>使用SoundPool播放音效(Duang~)</a>
            </li><li class="chapter " data-level="10.2" data-path="../video/mediaplayer.html"><a href="../video/mediaplayer.html"><b>10.2.</b>MediaPlayer播放音频与视频</a>
            </li><li class="chapter " data-level="10.3" data-path="../video/camera.html"><a href="../video/camera.html"><b>10.3.</b>使用Camera拍照</a>
            </li><li class="chapter " data-level="10.4" data-path="../video/mediarecord.html"><a href="../video/mediarecord.html"><b>10.4.</b>使用MediaRecord录音</a>
            </li>

            <li class="header">十一、Android服务管理器</li>
            <li class="chapter " data-level="11.1" data-path="../manager/telephonymanager.html"><a href="../manager/telephonymanager.html"><b>11.1.</b>TelephonyManager(电话管理器)</a>
            </li><li class="chapter " data-level="11.2" data-path="../manager/smsmanager.html"><a href="../manager/smsmanager.html"><b>11.2.</b>SmsManager(短信管理器)</a>
            </li><li class="chapter " data-level="11.3" data-path="../manager/audiomanager.html"><a href="../manager/audiomanager.html"><b>11.3.</b>AudioManager(音频管理器)</a>
            </li><li class="chapter " data-level="11.4" data-path="../manager/vibrator.html"><a href="../manager/vibrator.html"><b>11.4.</b>Vibrator(振动器)</a>
            </li><li class="chapter " data-level="11.5" data-path="../manager/alarmmanager.html"><a href="../manager/alarmmanager.html"><b>11.5.</b>AlarmManager(闹钟服务)</a>
            </li><li class="chapter " data-level="11.6" data-path="../manager/powermanager.html"><a href="../manager/powermanager.html"><b>11.6.</b>PowerManager(电源服务)</a>
            </li><li class="chapter " data-level="11.7" data-path="../manager/windowmanager.html"><a href="../manager/windowmanager.html"><b>11.7.</b>WindowManager(窗口管理服务)</a>
            </li><li class="chapter " data-level="11.8" data-path="../manager/layoutinflater.html"><a href="../manager/layoutinflater.html"><b>11.8.</b>LayoutInflater(布局服务)</a>
            </li><li class="chapter " data-level="11.9" data-path="../manager/wallpapermanager.html"><a href="../manager/wallpapermanager.html"><b>11.9.</b>WallpaperManager(壁纸管理器)</a>
            </li><li class="chapter " data-level="11.10" data-path="../manager/sensor1.html"><a href="../manager/sensor1.html"><b>11.10.</b>传感器专题(1)——相关介绍</a>
            </li><li class="chapter " data-level="11.11" data-path="../manager/sensor2.html"><a href="../manager/sensor2.html"><b>11.11.</b>传感器专题(2)——方向传感器</a>
            </li><li class="chapter " data-level="11.12" data-path="../manager/sensor3.html"><a href="../manager/sensor3.html"><b>11.12.</b>传感器专题(3)——加速度/陀螺仪传感器</a>
            </li><li class="chapter " data-level="11.13" data-path="../manager/sensor4.html"><a href="../manager/sensor4.html"><b>11.13.</b>传感器专题(4)——其他传感器了解</a>
            </li><li class="chapter " data-level="11.14" data-path="../manager/gps.html"><a href="../manager/gps.html"><b>11.14.</b>Android GPS初涉</a>
            </li>

            <li class="header">十二、Android项目实战(看妹子APP)</li>
            <li class="chapter " data-level="12.1" data-path="../drysister/drysister1.html"><a href="../drysister/drysister1.html"><b>12.1.</b>项目搭建与简单实现</a>
            </li><li class="chapter " data-level="12.2" data-path="../drysister/drysister2.html"><a href="../drysister/drysister2.html"><b>12.2.</b>解析后台数据</a>
            </li><li class="chapter " data-level="12.3" data-path="../drysister/drysister3.html"><a href="../drysister/drysister3.html"><b>12.3.</b>图片加载优化(写个图片缓存小框架)</a>
            </li><li class="chapter " data-level="12.4" data-path="../drysister/drysister4.html"><a href="../drysister/drysister4.html"><b>12.4.</b>添加数据缓存(加入SQLite)</a>
            </li><li class="chapter " data-level="12.5" data-path="../drysister/drysister5.html"><a href="../drysister/drysister5.html"><b>12.5.</b>代码回顾，调整与日志类编写</a>
            </li><li class="chapter " data-level="12.6" data-path="../drysister/drysister6.html"><a href="../drysister/drysister6.html"><b>12.6.</b>图标制作，混淆，签名打包，APK瘦身，应用发布</a>
            </li>

            <li class="divider"></li>
            <li><a href="https://www.54dxs.cn" target="blank" class="gbook-link">本书使用 GBook 发布</a></li>
        </ul>
        </nav>
        <!-- 左侧导航-end -->

    </div>
    <!-- 左侧-end -->

    <!-- 右侧主体内容区-start -->
    <div class="book-body">
        <div class="body-inner">
            <!-- 标题-start -->
            <div class="book-header" role="navigation">
                <h1>
                    <i class="fa fa-circle-o-notch fa-spin"></i>
                    <a href="../.." >Service精通</a>
                </h1>
            </div>
            <!-- 标题-end -->

        <div class="page-wrapper" tabindex="-1" role="main">
        <div class="page-inner">
        <div id="book-search-results">



        <div class="search-noresults">
        <!-- -------------------------------------------------------------正文内容展示区-start------------------------------------------------------------- -->
        <section class="normal markdown-section">
<h2 id="&#x4E00;&#x3001;&#x672C;&#x8282;&#x5F15;&#x8A00;&#xFF1A;">&#x4E00;&#x3001;&#x672C;&#x8282;&#x5F15;&#x8A00;&#xFF1A;</h2>
<p>&#x672C;&#x8282;&#xFF0C;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x6765;&#x7814;&#x7A76;Service(&#x670D;&#x52A1;)&#x7EC4;&#x4EF6;&#xFF0C;&#x672C;&#x8282;&#x5C06;&#x4F1A;&#x5B66;&#x4E60;&#x4E0B;Android&#x4E2D;&#x7684;AIDL&#x8DE8;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#x7684;&#x4E00;&#x4E9B; &#x6982;&#x5FF5;&#xFF0C;&#x5E76;&#x4E0D;&#x6DF1;&#x5165;&#x5230;&#x6E90;&#x7801;&#x5C42;&#x6B21;&#xFF0C;&#x6682;&#x65F6;&#x77E5;&#x9053;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x4F1A;&#x7528;&#x5373;&#x53EF;&#xFF01;&#x5F00;&#x59CB;&#x672C;&#x8282;&#x5185;&#x5BB9;~ &#x672C;&#x8282;&#x5BF9;&#x5E94;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="http://developer.android.com/intl/zh-cn/reference/android/os/Binder.html" target="_blank">Binder</a></p>
<h2 id="&#x4E8C;&#x3001;binder&#x673A;&#x5236;&#x521D;&#x6D89;">&#x4E8C;&#x3001;Binder&#x673A;&#x5236;&#x521D;&#x6D89;</h2>
<h3 id="1&#xFF09;ibinder&#x548C;binder&#x662F;&#x4EC0;&#x4E48;&#x9B3C;&#xFF1F;">1&#xFF09;IBinder&#x548C;Binder&#x662F;&#x4EC0;&#x4E48;&#x9B3C;&#xFF1F;</h3>
<p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x600E;&#x4E48;&#x8BF4;&#xFF1A;</p>
<p><img src="../img/component-36.jpg" alt=""></p>
<p>&#x4E2D;&#x6587;&#x7FFB;&#x8BD1;&#xFF1A;</p>
<p>IBinder&#x662F;&#x8FDC;&#x7A0B;&#x5BF9;&#x8C61;&#x7684;&#x57FA;&#x672C;&#x63A5;&#x53E3;&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x9AD8;&#x6027;&#x80FD;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x673A;&#x5236;&#x7684;&#x6838;&#x5FC3;&#x90E8;&#x5206;&#x3002;&#x4F46;&#x4ED6; &#x4E0D;&#x4EC5;&#x7528;&#x4E8E;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#xFF0C;&#x4E5F;&#x7528;&#x4E8E;&#x8FDB;&#x7A0B;&#x5185;&#x8C03;&#x7528;&#x3002;&#x8BE5;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x4E86;&#x4E0E;&#x8FDC;&#x7A0B;&#x5BF9;&#x8C61;&#x95F4;&#x4EA4;&#x4E92;&#x7684;&#x534F;&#x8BAE;&#x3002;&#x4F46;&#x4E0D;&#x8981;&#x76F4;&#x63A5;&#x5B9E;&#x73B0; &#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x662F;&#x7EE7;&#x627F;(extends)Binder&#x3002;</p>
<p>IBinder&#x4E3B;&#x8981;&#x7684;API&#x662F;transact()&#xFF0C;&#x4E0E;&#x4E4B;&#x5BF9;&#x5E94;&#x7684;API&#x662F;Binder.onTransact()&#x3002;&#x901A;&#x8FC7;&#x524D;&#x8005;&#xFF0C;&#x4F60;&#x80FD; &#x5411;&#x8FDC;&#x7A0B;IBinder&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x53D1;&#x51FA;&#x8C03;&#x7528;&#xFF0C;&#x540E;&#x8005;&#x4F7F;&#x4F60;&#x7684;&#x8FDC;&#x7A0B;&#x5BF9;&#x8C61;&#x80FD;&#x591F;&#x54CD;&#x5E94;&#x63A5;&#x6536;&#x5230;&#x7684;&#x8C03;&#x7528;&#x3002;IBinder&#x7684;API&#x90FD;&#x662F; Syncronous(&#x540C;&#x6B65;)&#x6267;&#x884C;&#x7684;&#xFF0C;&#x6BD4;&#x5982;transact()&#x76F4;&#x5230;&#x5BF9;&#x65B9;&#x7684;Binder.onTransact()&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x5B8C;&#x540E;&#x624D;&#x8FD4;&#x56DE;&#x3002; &#x8C03;&#x7528;&#x53D1;&#x751F;&#x5728;&#x8FDB;&#x7A0B;&#x5185;&#x65F6;&#x65E0;&#x7591;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x800C;&#x5728;&#x8FDB;&#x7A0B;&#x95F4;&#x65F6;&#xFF0C;&#x5728;IPC&#x7684;&#x5E2E;&#x52A9;&#x4E0B;&#xFF0C;&#x4E5F;&#x662F;&#x540C;&#x6837;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p>&#x901A;&#x8FC7;transact()&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x662F;Parcel&#xFF0C;Parcel&#x662F;&#x4E00;&#x79CD;&#x4E00;&#x822C;&#x7684;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x9664;&#x4E86;&#x6709;&#x6570;&#x636E;&#x5916;&#x8FD8;&#x5E26;&#x6709; &#x4E00;&#x4E9B;&#x63CF;&#x8FF0;&#x5B83;&#x5185;&#x5BB9;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;&#x5143;&#x6570;&#x636E;&#x7528;&#x4E8E;&#x7BA1;&#x7406;IBinder&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x5728;&#x7F13;&#x51B2;&#x533A;&#x4ECE;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x79FB;&#x52A8; &#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x65F6;&#x4FDD;&#x5B58;&#x8FD9;&#x4E9B;&#x5F15;&#x7528;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x4FDD;&#x8BC1;&#x4E86;&#x5F53;&#x4E00;&#x4E2A;IBinder&#x88AB;&#x5199;&#x5165;&#x5230;Parcel&#x5E76;&#x53D1;&#x9001;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E2D;&#xFF0C; &#x5982;&#x679C;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x628A;&#x540C;&#x4E00;&#x4E2A;IBinder&#x7684;&#x5F15;&#x7528;&#x56DE;&#x53D1;&#x5230;&#x539F;&#x6765;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x539F;&#x6765;&#x7684;&#x8FDB;&#x7A0B;&#x5C31;&#x80FD;&#x63A5;&#x6536;&#x5230;&#x53D1;&#x51FA;&#x7684; &#x90A3;&#x4E2A;IBinder&#x7684;&#x5F15;&#x7528;&#x3002;&#x8FD9;&#x79CD;&#x673A;&#x5236;&#x4F7F;IBinder&#x548C;Binder&#x50CF;&#x552F;&#x4E00;&#x6807;&#x5FD7;&#x7B26;&#x90A3;&#x6837;&#x5728;&#x8FDB;&#x7A0B;&#x95F4;&#x7BA1;&#x7406;&#x3002;</p>
<p>&#x7CFB;&#x7EDF;&#x4E3A;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x5B58;&#x653E;&#x4EA4;&#x4E92;&#x7EBF;&#x7A0B;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x3002;&#x8FD9;&#x4E9B;&#x4EA4;&#x4E92;&#x7EBF;&#x7A0B;&#x7528;&#x4E8E;&#x6D3E;&#x9001;&#x6240;&#x6709;&#x4ECE;&#x53E6;&#x5916;&#x8FDB;&#x7A0B;&#x53D1;&#x6765;&#x7684;IPC &#x8C03;&#x7528;&#x3002;&#x4F8B;&#x5982;&#xFF1A;&#x5F53;&#x4E00;&#x4E2A;IPC&#x4ECE;&#x8FDB;&#x7A0B;&#xFF21;&#x53D1;&#x5230;&#x8FDB;&#x7A0B;&#xFF22;&#xFF0C;&#xFF21;&#x4E2D;&#x90A3;&#x4E2A;&#x53D1;&#x51FA;&#x8C03;&#x7528;&#x7684;&#x7EBF;&#x7A0B;(&#x8FD9;&#x4E2A;&#x5E94;&#x8BE5;&#x4E0D;&#x5728;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;)&#x5C31;&#x963B;&#x585E; &#x5728;transact()&#x4E2D;&#x4E86;&#x3002;&#x8FDB;&#x7A0B;&#xFF22;&#x4E2D;&#x7684;&#x4EA4;&#x4E92;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x63A5;&#x6536;&#x4E86;&#x8FD9;&#x4E2A;&#x8C03;&#x7528;&#xFF0C;&#x5B83;&#x8C03;&#x7528; Binder.onTransact()&#xFF0C;&#x5B8C;&#x6210;&#x540E;&#x7528;&#x4E00;&#x4E2A;Parcel&#x6765;&#x505A;&#x4E3A;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x3002;&#x7136;&#x540E;&#x8FDB;&#x7A0B;&#xFF21;&#x4E2D;&#x7684;&#x90A3;&#x4E2A;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#x5728; &#x6536;&#x5230;&#x8FD4;&#x56DE;&#x7684;Parcel&#x540E;&#x5F97;&#x4EE5;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x770B;&#x8D77;&#x6765;&#x5C31;&#x50CF;&#x662F;&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x7684;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C; &#x4F46;&#x4E0D;&#x662F;&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;&#x7684;&#x3002;</p>
<p>Binder&#x673A;&#x5236;&#x8FD8;&#x652F;&#x6301;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x8FDB;&#x7A0B;&#xFF21;&#x6267;&#x884C;&#x81EA;&#x5DF1;&#x7684;IBinder&#x7684;transact()&#x8C03;&#x7528;&#x8FDB;&#x7A0B;&#xFF22; &#x7684;Binder&#xFF0C;&#x800C;&#x8FDB;&#x7A0B;&#xFF22;&#x5728;&#x5176;Binder.onTransact()&#x4E2D;&#x53C8;&#x7528;transact()&#x5411;&#x8FDB;&#x7A0B;&#xFF21;&#x53D1;&#x8D77;&#x8C03;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x8FDB;&#x7A0B;&#xFF21; &#x5728;&#x7B49;&#x5F85;&#x5B83;&#x53D1;&#x51FA;&#x7684;&#x8C03;&#x7528;&#x8FD4;&#x56DE;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x8FD8;&#x4F1A;&#x7528;Binder.onTransact()&#x54CD;&#x5E94;&#x8FDB;&#x7A0B;&#xFF22;&#x7684;transact()&#x3002; &#x603B;&#x4E4B;Binder&#x9020;&#x6210;&#x7684;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x8BA9;&#x6211;&#x4EEC;&#x611F;&#x89C9;&#x5230;&#x8DE8;&#x8FDB;&#x7A0B;&#x7684;&#x8C03;&#x7528;&#x4E0E;&#x8FDB;&#x7A0B;&#x5185;&#x7684;&#x8C03;&#x7528;&#x6CA1;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x3002;</p>
<p>&#x5F53;&#x64CD;&#x4F5C;&#x8FDC;&#x7A0B;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x4F60;&#x7ECF;&#x5E38;&#x9700;&#x8981;&#x67E5;&#x770B;&#x5B83;&#x4EEC;&#x662F;&#x5426;&#x6709;&#x6548;&#xFF0C;&#x6709;&#x4E09;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF1A;</p>
<ul>
<li>&#xFF11; transact()&#x65B9;&#x6CD5;&#x5C06;&#x5728;IBinder&#x6240;&#x5728;&#x7684;&#x8FDB;&#x7A0B;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#x629B;&#x51FA;RemoteException&#x5F02;&#x5E38;&#x3002;</li>
<li>&#xFF12; &#x5982;&#x679C;&#x76EE;&#x6807;&#x8FDB;&#x7A0B;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x8C03;&#x7528;pingBinder()&#x65F6;&#x8FD4;&#x56DE;false&#x3002;</li>
<li>&#xFF13; &#x53EF;&#x4EE5;&#x7528;linkToDeath()&#x65B9;&#x6CD5;&#x5411;IBinder&#x6CE8;&#x518C;&#x4E00;&#x4E2A;IBinder.DeathRecipient&#xFF0C; &#x5728;IBinder&#x4EE3;&#x8868;&#x7684;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;&#x65F6;&#x88AB;&#x8C03;&#x7528;&#x3002;</li>
</ul>
<p>PS:&#x4E2D;&#x6587;&#x7FFB;&#x8BD1;&#x6458;&#x81EA; : Android&#x5F00;&#x53D1;&#xFF1A;&#x4EC0;&#x4E48;&#x662F;IBinder</p>
<p>&#x597D;&#x5427;&#xFF0C;&#x4F30;&#x8BA1;&#x4F60;&#x770B;&#x5B8C;&#x4E0A;&#x8FD9;&#x4E00;&#x4E32;&#x4E1C;&#x897F;&#x53EF;&#x80FD;&#x4E91;&#x91CC;&#x96FE;&#x91CC;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x5C0F;&#x7ED3;&#x4E0B;&#xFF1A;</p>
<p>IBinder&#x662F;Android&#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x662F;&#x4E0D;&#x76F4;&#x63A5;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x7684;&#xFF0C; &#x800C;&#x662F;&#x901A;&#x8FC7;&#x7EE7;&#x627F;Binder&#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#xFF01;&#x662F;Android&#x4E2D;&#x5B9E;&#x73B0;IPC(&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;)&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#xFF01;</p>
<h3 id="2&#xFF09;binder&#x673A;&#x5236;&#x6D45;&#x6790;">2&#xFF09;Binder&#x673A;&#x5236;&#x6D45;&#x6790;</h3>
<p>Android&#x4E2D;&#x7684;Binder&#x673A;&#x5236;&#x7531;&#x4E00;&#x7CFB;&#x5217;&#x7CFB;&#x7EDF;&#x7EC4;&#x4EF6;&#x6784;&#x6210;&#xFF1A; Client&#x3001;Server&#x3001;Service Manager&#x548C;Binder&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;</p>
<p>&#x5927;&#x6982;&#x8C03;&#x7528;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;&#xFF0C;&#x53E6;&#x5916;Service Manager&#x6BD4;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x8FD9;&#x91CC;&#x5E76;&#x4E0D;&#x8BE6;&#x7EC6;&#x7814;&#x7A76;&#xFF01;</p>
<p><img src="../img/component-37.jpg" alt=""></p>
<p>&#x6D41;&#x7A0B;&#x89E3;&#x6790;&#xFF1A;</p>
<p>-&gt; Client&#x8C03;&#x7528;&#x67D0;&#x4E2A;&#x4EE3;&#x7406;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x4EE3;&#x7406;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x6CD5;&#x4F1A;&#x5C06;Client&#x4F20;&#x9012;&#x7684;&#x53C2;&#x6570;&#x6253;&#x5305;&#x6210;Parcel&#x5BF9;&#x8C61;&#xFF1B;
-&gt; &#x7136;&#x540E;&#x4EE3;&#x7406;&#x63A5;&#x53E3;&#x628A;&#x8BE5;Parcel&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x7ED9;&#x5185;&#x6838;&#x4E2D;&#x7684;Binder driver&#xFF1B;&#xFF1B;
-&gt; &#x7136;&#x540E;Server&#x4F1A;&#x8BFB;&#x53D6;Binder Driver&#x4E2D;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#xFF0C;&#x5047;&#x5982;&#x662F;&#x53D1;&#x9001;&#x7ED9;&#x81EA;&#x5DF1;&#x7684;&#xFF0C;&#x89E3;&#x5305;Parcel&#x5BF9;&#x8C61;&#xFF0C; &#x5904;&#x7406;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#xFF1B;
PS:&#x4EE3;&#x7406;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x548C;Server&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x7684;&#xFF0C; &#x53E6;&#x5916;&#xFF0C;&#x6574;&#x4E2A;&#x8C03;&#x7528;&#x8FC7;&#x7A0B;&#x662F;&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x7684;&#xFF0C;&#x5373;Server&#x5728;&#x5904;&#x7406;&#x65F6;&#xFF0C;Client&#x4F1A;&#x88AB;Block(&#x9501;)&#x4F4F;! &#x800C;&#x8FD9;&#x91CC;&#x8BF4;&#x7684;&#x4EE3;&#x7406;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;&#x5C31;&#x662F;&#x7B49;&#x4E0B;&#x8981;&#x8BF4;&#x7684;AIDL(Android&#x63A5;&#x53E3;&#x63CF;&#x8FF0;&#x8BED;&#x8A00;)&#xFF01;</p>
<h3 id="3&#xFF09;&#x4E3A;&#x4F55;android&#x4F7F;&#x7528;binder&#x673A;&#x5236;&#x6765;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF1F;">3&#xFF09;&#x4E3A;&#x4F55;Android&#x4F7F;&#x7528;Binder&#x673A;&#x5236;&#x6765;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF1F;</h3>
<ul>
<li><p><code>&#x53EF;&#x9760;&#x6027;</code>&#xFF1A;&#x5728;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#x4E0A;&#xFF0C;&#x901A;&#x5E38;&#x91C7;&#x7528;&#x57FA;&#x4E8E;Client-Server&#x7684;&#x901A;&#x4FE1;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x4E92;&#x8054;&#x7F51;&#x4E0E;&#x8BBE;&#x5907;&#x95F4;&#x7684;&#x5185;&#x90E8;&#x901A;&#x4FE1;&#x3002;&#x76EE;&#x524D;linux&#x652F;&#x6301;IPC&#x5305;&#x62EC;&#x4F20;&#x7EDF;&#x7684;&#x7BA1;&#x9053;&#xFF0C;System V IPC&#xFF0C;&#x5373;&#x6D88;&#x606F;&#x961F;&#x5217;/&#x5171;&#x4EAB;&#x5185;&#x5B58;/&#x4FE1;&#x53F7;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;socket&#x4E2D;&#x53EA;&#x6709;socket&#x652F;&#x6301;Client-Server&#x7684;&#x901A;&#x4FE1;&#x65B9;&#x5F0F;&#x3002;Android&#x7CFB;&#x7EDF;&#x4E3A;&#x5F00;&#x53D1;&#x8005;&#x63D0;&#x4F9B;&#x4E86;&#x4E30;&#x5BCC;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x529F;&#x80FD;&#x63A5;&#x53E3;&#xFF0C;&#x5A92;&#x4F53;&#x64AD;&#x653E;&#xFF0C;&#x4F20;&#x611F;&#x5668;&#xFF0C;&#x65E0;&#x7EBF;&#x4F20;&#x8F93;&#x3002;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x90FD;&#x7531;&#x4E0D;&#x540C;&#x7684;server&#x6765;&#x7BA1;&#x7406;&#x3002;&#x5F00;&#x53D1;&#x90FD;&#x53EA;&#x5173;&#x5FC3;&#x5C06;&#x81EA;&#x5DF1;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;client&#x4E0E;server&#x7684;&#x901A;&#x4FE1;&#x5EFA;&#x7ACB;&#x8D77;&#x6765;&#x4FBF;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x3002;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#xFF0C;&#x5982;&#x82E5;&#x5728;&#x5E95;&#x5C42;&#x67B6;&#x8BBE;&#x4E00;&#x5957;&#x534F;&#x8BAE;&#x6765;&#x5B9E;&#x73B0;Client-Server&#x901A;&#x4FE1;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x590D;&#x6742;&#x6027;&#x3002;&#x5728;&#x8D44;&#x6E90;&#x6709;&#x9650;&#x7684;&#x624B;&#x673A; &#x4E0A;&#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x79CD;&#x590D;&#x6742;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x53EF;&#x9760;&#x6027;&#x96BE;&#x4EE5;&#x4FDD;&#x8BC1;&#x3002;</p>
</li>
<li><p><code>&#x4F20;&#x8F93;&#x6027;&#x80FD;</code>&#xFF1A;socket&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8DE8;&#x7F51;&#x7EDC;&#x7684;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x548C;&#x672C;&#x673A;&#x4E0A;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x4F46;&#x4F20;&#x8F93;&#x6548;&#x7387;&#x4F4E;&#xFF0C;&#x5F00;&#x9500;&#x5927;&#x3002;&#x6D88;&#x606F;&#x961F;&#x5217;&#x548C;&#x7BA1;&#x9053;&#x91C7;&#x7528;&#x5B58;&#x50A8;-&#x8F6C;&#x53D1;&#x65B9;&#x5F0F;&#xFF0C;&#x5373;&#x6570;&#x636E;&#x5148;&#x4ECE;&#x53D1;&#x9001;&#x65B9;&#x7F13;&#x5B58;&#x533A;&#x62F7;&#x8D1D;&#x5230;&#x5185;&#x6838;&#x5F00;&#x8F9F;&#x7684;&#x4E00;&#x5757;&#x7F13;&#x5B58;&#x533A;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x5185;&#x6838;&#x7F13;&#x5B58;&#x533A;&#x62F7;&#x8D1D;&#x5230;&#x63A5;&#x6536;&#x65B9;&#x7F13;&#x5B58;&#x533A;&#xFF0C;&#x5176;&#x8FC7;&#x7A0B;&#x81F3;&#x5C11;&#x6709;&#x4E24;&#x6B21;&#x62F7;&#x8D1D;&#x3002;&#x867D;&#x7136;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x65E0;&#x9700;&#x62F7;&#x8D1D;&#xFF0C;&#x4F46;&#x63A7;&#x5236;&#x590D;&#x6742;&#x3002;&#x6BD4;&#x8F83;&#x5404;&#x79CD;IPC&#x65B9;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x62F7;&#x8D1D;&#x6B21;&#x6570;&#x3002;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#xFF1A;0&#x6B21;&#x3002;Binder&#xFF1A;1&#x6B21;&#x3002;Socket/&#x7BA1;&#x9053;/&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF1A;2&#x6B21;&#x3002;</p>
</li>
<li><p><code>&#x5B89;&#x5168;&#x6027;</code>&#xFF1A;Android&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x653E;&#x5F0F;&#x7684;&#x5E73;&#x53F0;&#xFF0C;&#x6240;&#x4EE5;&#x786E;&#x4FDD;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5B89;&#x5168;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x3002;Android&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x5B89;&#x88C5;&#x5E94;&#x7528;&#x90FD;&#x5206;&#x914D;&#x4E86;UID/PID,&#x5176;&#x4E2D;&#x8FDB;&#x7A0B;&#x7684;UID&#x662F;&#x53EF;&#x7528;&#x6765;&#x9274;&#x522B;&#x8FDB;&#x7A0B;&#x8EAB;&#x4EFD;&#x3002;&#x4F20;&#x7EDF;&#x7684;&#x53EA;&#x80FD;&#x7531;&#x7528;&#x6237;&#x5728;&#x6570;&#x636E;&#x5305;&#x91CC;&#x586B;&#x5199;UID/PID&#xFF0C;&#x8FD9;&#x6837;&#x4E0D;&#x53EF;&#x9760;&#xFF0C;&#x5BB9;&#x6613;&#x88AB;&#x6076;&#x610F;&#x7A0B;&#x5E8F;&#x5229;&#x7528;&#x3002;&#x800C;&#x6211;&#x4EEC;&#x8981;&#x6C42;&#x7531;&#x5185;&#x6838;&#x6765;&#x6DFB;&#x52A0;&#x53EF;&#x9760;&#x7684;UID&#x3002; &#x6240;&#x4EE5;&#xFF0C;&#x51FA;&#x4E8E;&#x53EF;&#x9760;&#x6027;&#x3001;&#x4F20;&#x8F93;&#x6027;&#x3001;&#x5B89;&#x5168;&#x6027;&#x3002;android&#x5EFA;&#x7ACB;&#x4E86;&#x4E00;&#x5957;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x65B9;&#x5F0F;&#x3002; &#x2014;&#x2014;&#x6458;&#x81EA;:Android&#x4E2D;&#x7684;Binder&#x673A;&#x5236;&#x7684;&#x7B80;&#x8981;&#x7406;&#x89E3;</p>
</li>
</ul>
<p>&#x5F53;&#x7136;&#xFF0C;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x521D;&#x7EA7;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x5173;&#x5FC3;&#x4E0A;&#x8FF0;&#x8FD9;&#x4E9B;&#xFF0C;Binder&#x673A;&#x5236;&#x7ED9;&#x6211;&#x4EEC;&#x5E26;&#x6765;&#x7684;&#x6700;&#x76F4;&#x63A5;&#x7684;&#x597D;&#x5904;&#x5C31;&#x662F;&#xFF1A; &#x6211;&#x4EEC;&#x65E0;&#x9700;&#x5173;&#x5FC3;&#x5E95;&#x5C42;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF0C;&#x53EA;&#x9700;&#x6309;&#x7167;AIDL&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x6587;&#x4EF6;&#xFF0C; &#x7136;&#x540E;&#x8C03;&#x7528;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x4E86;&#xFF01;</p>
<h2 id="&#x4E09;&#x3001;aidl&#x4F7F;&#x7528;&#x8BE6;&#x89E3;">&#x4E09;&#x3001;AIDL&#x4F7F;&#x7528;&#x8BE6;&#x89E3;</h2>
<h3 id="1&#xFF09;aidl&#x662F;&#x4EC0;&#x4E48;&#xFF1F;">1&#xFF09;AIDL&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h3>
<p>&#x563F;&#x563F;&#xFF0C;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x8BB2;&#x5230;IPC&#x8FD9;&#x4E2A;&#x540D;&#x8BCD;&#xFF0C;&#x4ED6;&#x7684;&#x5168;&#x540D;&#x53EB;&#x505A;&#xFF1A;&#x8DE8;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;(interprocess communication)&#xFF0C; &#x56E0;&#x4E3A;&#x5728;Android&#x7CFB;&#x7EDF;&#x4E2D;,&#x4E2A;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x90FD;&#x8FD0;&#x884C;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x8FDB;&#x7A0B;&#x4E2D;,&#x8FDB;&#x7A0B;&#x4E4B;&#x95F4;&#x4E00;&#x822C;&#x662F;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x7684;, &#x800C;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x8DE8;&#x8FDB;&#x7A0B;&#xFF0C;Android&#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E0A;&#x9762;&#x8BF4;&#x7684;Binder&#x673A;&#x5236;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x4F7F;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x8BED;&#x8A00;&#x5C31;&#x662F;: AIDL(Android Interface Definition Language)&#xFF0C;&#x4ED6;&#x7684;&#x8BED;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x800C;&#x8FD9;&#x79CD;&#x63A5;&#x53E3;&#x8BED;&#x8A00;&#x5E76;&#x975E;&#x771F;&#x6B63;&#x7684;&#x7F16;&#x7A0B; &#x8BED;&#x8A00;&#xFF0C;&#x53EA;&#x662F;&#x5B9A;&#x4E49;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x63A5;&#x53E3;&#x800C;&#x5DF2;&#xFF01;&#x800C;&#x751F;&#x6210;&#x7B26;&#x5408;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#x7684;Java&#x4EE3;&#x7801;&#x5219;&#x662F;&#x7531;Android SDK&#x7684; platform-tools&#x76EE;&#x5F55;&#x4E0B;&#x7684;aidl.exe&#x5DE5;&#x5177;&#x751F;&#x6210;&#xFF0C;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x6587;&#x4EF6;&#x5728;:gen&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x4E00;&#x822C;&#x662F;:Xxx.java&#x7684;&#x63A5;&#x53E3;&#xFF01; &#x800C;&#x5728;&#x8BE5;&#x63A5;&#x53E3;&#x4E2D;&#x5305;&#x542B;&#x4E00;&#x4E2A;Stub&#x7684;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x8BE5;&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;&#x4E86;&#x5728;&#x8BE5;&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;&#x4E86;IBinder&#x63A5;&#x53E3;&#x4E0E;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x901A;&#x4FE1;&#x63A5;&#x53E3;, &#x8FD9;&#x4E2A;&#x7C7B;&#x5C06;&#x4F1A;&#x4F5C;&#x4E3A;&#x8FDC;&#x7A0B;Service&#x7684;&#x56DE;&#x8C03;&#x7C7B;&#x2014;&#x2014;&#x5B9E;&#x73B0;&#x4E86;IBinder&#x63A5;&#x53E3;,&#x6240;&#x4EE5;&#x53EF;&#x4F5C;&#x4E3A;Service&#x7684;onBind( )&#x65B9;&#x6CD5;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF01;</p>
<h3 id="2&#xFF09;aidl&#x5B9E;&#x73B0;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x7B80;&#x5355;&#x901A;&#x4FE1;">2&#xFF09;AIDL&#x5B9E;&#x73B0;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x7B80;&#x5355;&#x901A;&#x4FE1;</h3>
<p>&#x5728;&#x5F00;&#x59CB;&#x7F16;&#x5199;AIDL&#x63A5;&#x53E3;&#x6587;&#x4EF6;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x4E0B;&#x7F16;&#x5199;AIDL&#x7684;&#x4E00;&#x4E9B;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;</p>
<p><strong>AIDL&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;</strong></p>
<ul>
<li>&#x63A5;&#x53E3;&#x540D;&#x8BCD;&#x9700;&#x8981;&#x4E0E;aidl&#x6587;&#x4EF6;&#x540D;&#x76F8;&#x540C;</li>
<li>&#x63A5;&#x53E3;&#x548C;&#x65B9;&#x6CD5;&#x524D;&#x9762;&#x4E0D;&#x8981;&#x52A0;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x4FEE;&#x9970;&#x7B26;&#xFF1A;public ,private,protected&#x7B49;&#xFF0C;&#x4E5F;&#x4E0D;&#x80FD;&#x7528;static final!</li>
<li>AIDL&#x9ED8;&#x8BA4;&#x652F;&#x6301;&#x7684;&#x7C7B;&#x578B;&#x5305;&#x62EC;Java&#x57FA;&#x672C;&#x7C7B;&#x578B;&#xFF0C;String&#xFF0C;List&#xFF0C;Map&#xFF0C;CharSequence&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x7684;&#x5176;&#x4ED6;&#x7C7B;&#x578B;&#x90FD; &#x9700;&#x8981;import&#x58F0;&#x660E;&#xFF0C;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x6216;&#x8005;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x9700;&#x8981;&#x5B9E;&#x73B0;Parcelable&#x63A5;&#x53E3;&#xFF0C; &#x8BE6;&#x60C5;&#x8BF7;&#x770B;&#x540E;&#x9762;&#x7684;&#x4F20;&#x9012;&#x590D;&#x6742;&#x6570;&#x636E;&#x7C7B;&#x578B;</li>
<li>&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x548C;AIDL&#x751F;&#x6210;&#x7684;&#x5176;&#x5B83;&#x63A5;&#x53E3;&#x7C7B;&#x578B;&#x5728;aidl&#x63CF;&#x8FF0;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5E94;&#x8BE5;&#x663E;&#x5F0F;import&#xFF0C;&#x5373;&#x4FBF;&#x5728;&#x8BE5;&#x7C7B;&#x548C;&#x5B9A;&#x4E49; &#x7684;&#x5305;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5305;&#x4E2D;&#x3002;</li>
</ul>
<p>&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x7F16;&#x5199;aidl&#x4F60;&#x7528;&#x7684;&#x7F16;&#x8BD1;&#x5668;&#x662F;:Eclipse&#x7684;&#x8BDD;&#x8981;&#x6CE8;&#x610F;&#xFF1A; &#x4E0D;&#x8981;&#x76F4;&#x63A5;new file&#x7136;&#x540E;&#x5EFA;&#x7ACB;&#x54E6;!&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x662F;&#x6253;&#x4E0D;&#x5F00;&#x6587;&#x4EF6;,&#x4ECE;&#x800C;&#x4E0D;&#x80FD;&#x7F16;&#x5199;&#x4EE3;&#x7801;&#x54E6;&#xFF01;</p>
<ul>
<li>&#x2460;&#x76F4;&#x63A5;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;txt&#x6587;&#x4EF6;,&#x7F16;&#x5199;&#x597D;&#x540E;&#x4FDD;&#x5B58;&#x4E3A;.aidl&#x683C;&#x5F0F;,&#x7136;&#x540E;&#x590D;&#x5236;&#x5230;&#x5BF9;&#x5E94;&#x8DEF;&#x5F84;&#x4E0B;</li>
<li>&#x2461;&#x56E0;&#x4E3A;aidl&#x548C;&#x63A5;&#x53E3;&#x7C7B;&#x4F3C;,&#x6240;&#x4EE5;&#x76F4;&#x63A5;new interface,&#x7F16;&#x5199;&#x597D;&#x5185;&#x5BB9;&#x540E;,&#x6765;&#x5230;&#x5BF9;&#x5E94;java&#x6587;&#x4EF6;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x4E0B;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x540E;&#x7F00;&#x540D;;</li>
</ul>
<p>&#x5047;&#x5982;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x662F;Android Studio&#x7684;&#x8BDD;&#xFF0C;&#x4E0D;&#x540C;&#x4E8E;Eclipse&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x6309;&#x7167;Eclipse&#x90A3;&#x6837;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;AIDL&#x6587;&#x4EF6;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0; &#x5E76;&#x6CA1;&#x6709;&#x7F16;&#x8BD1;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;XXX.java&#x6587;&#x4EF6;&#xFF0C;AS&#x4E0B;&#x521B;&#x5EFA;AIDL&#x9700;&#x8981;&#x5728;main&#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;aidl&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x7136;&#x540E;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A; &#x548C;aidl&#x5305;&#x540D;&#x76F8;&#x540C;&#x7684;&#x5305;&#xFF0C;&#x6700;&#x540E;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;aidl&#x6587;&#x4EF6;&#xFF0C;&#x63A5;&#x7740;&#x6309;ctrl + f9&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF01;</p>
<p><img src="../img/component-38.jpg" alt=""></p>
<p>&#x4E0A;&#x9762;&#x4E24;&#x8005;&#x6210;&#x529F;&#x7F16;&#x8BD1;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5206;&#x522B;&#x5728;&#x5BF9;&#x5E94;&#x76EE;&#x5F55;&#x4E0B;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;AIDL&#x6587;&#x4EF6;</p>
<p><img src="../img/component-39.jpg" alt="">
<img src="../img/component-40.jpg" alt=""></p>
<p><strong>1.&#x670D;&#x52A1;&#x7AEF;&#xFF1A;</strong></p>
<p>Step 1&#xFF1A;&#x521B;&#x5EFA;AIDL&#x6587;&#x4EF6;&#xFF1A;</p>
<p><code>IPerson.aidl</code></p>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> com.jay.aidl;

<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IPerson</span> </span>{
    <span class="hljs-function">String <span class="hljs-title">queryPerson</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span></span>;
}
</code></pre>
<p>&#x6211;&#x4EEC;&#x6253;&#x5F00;IPerson.java&#x770B;&#x770B;&#x91CC;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<p><code>IPerson.java</code></p>
<pre><code class="lang-java"><span class="hljs-comment">/*
 * This file is auto-generated.  DO NOT MODIFY.
 * Original file: C:\\Code\\ASCode\\AIDLServer\\app\\src\\main\\aidl\\com\\jay\\aidl\\IPerson.aidl
 */</span>
<span class="hljs-keyword">package</span> com.jay.aidl;
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IPerson</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">android</span>.<span class="hljs-title">os</span>.<span class="hljs-title">IInterface</span>
</span>{
<span class="hljs-comment">/** Local-side IPC implementation stub class. */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stub</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">android</span>.<span class="hljs-title">os</span>.<span class="hljs-title">Binder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">com</span>.<span class="hljs-title">jay</span>.<span class="hljs-title">aidl</span>.<span class="hljs-title">IPerson</span>
</span>{
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> java.lang.String DESCRIPTOR = <span class="hljs-string">&quot;com.jay.aidl.IPerson&quot;</span>;
<span class="hljs-comment">/** Construct the stub at attach it to the interface. */</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Stub</span><span class="hljs-params">()</span>
</span>{
<span class="hljs-keyword">this</span>.attachInterface(<span class="hljs-keyword">this</span>, DESCRIPTOR);
}
<span class="hljs-comment">/**
 * Cast an IBinder object into an com.jay.aidl.IPerson interface,
 * generating a proxy if needed.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> com.jay.aidl.<span class="hljs-function">IPerson <span class="hljs-title">asInterface</span><span class="hljs-params">(android.os.IBinder obj)</span>
</span>{
<span class="hljs-keyword">if</span> ((obj==<span class="hljs-keyword">null</span>)) {
<span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
}
android.os.IInterface iin = obj.queryLocalInterface(DESCRIPTOR);
<span class="hljs-keyword">if</span> (((iin!=<span class="hljs-keyword">null</span>)&amp;&amp;(iin <span class="hljs-keyword">instanceof</span> com.jay.aidl.IPerson))) {
<span class="hljs-keyword">return</span> ((com.jay.aidl.IPerson)iin);
}
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> com.jay.aidl.IPerson.Stub.Proxy(obj);
}
<span class="hljs-meta">@Override</span> <span class="hljs-keyword">public</span> android.os.<span class="hljs-function">IBinder <span class="hljs-title">asBinder</span><span class="hljs-params">()</span>
</span>{
<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
}
<span class="hljs-meta">@Override</span> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onTransact</span><span class="hljs-params">(<span class="hljs-keyword">int</span> code, android.os.Parcel data, android.os.Parcel reply, <span class="hljs-keyword">int</span> flags)</span> <span class="hljs-keyword">throws</span> android.os.RemoteException
</span>{
<span class="hljs-keyword">switch</span> (code)
{
<span class="hljs-keyword">case</span> INTERFACE_TRANSACTION:
{
reply.writeString(DESCRIPTOR);
<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}
<span class="hljs-keyword">case</span> TRANSACTION_queryPerson:
{
data.enforceInterface(DESCRIPTOR);
<span class="hljs-keyword">int</span> _arg0;
_arg0 = data.readInt();
java.lang.String _result = <span class="hljs-keyword">this</span>.queryPerson(_arg0);
reply.writeNoException();
reply.writeString(_result);
<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}
}
<span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onTransact(code, data, reply, flags);
}
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Proxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">com</span>.<span class="hljs-title">jay</span>.<span class="hljs-title">aidl</span>.<span class="hljs-title">IPerson</span>
</span>{
<span class="hljs-keyword">private</span> android.os.IBinder mRemote;
Proxy(android.os.IBinder remote)
{
mRemote = remote;
}
<span class="hljs-meta">@Override</span> <span class="hljs-keyword">public</span> android.os.<span class="hljs-function">IBinder <span class="hljs-title">asBinder</span><span class="hljs-params">()</span>
</span>{
<span class="hljs-keyword">return</span> mRemote;
}
<span class="hljs-keyword">public</span> java.lang.<span class="hljs-function">String <span class="hljs-title">getInterfaceDescriptor</span><span class="hljs-params">()</span>
</span>{
<span class="hljs-keyword">return</span> DESCRIPTOR;
}
<span class="hljs-meta">@Override</span> <span class="hljs-keyword">public</span> java.lang.<span class="hljs-function">String <span class="hljs-title">queryPerson</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> <span class="hljs-keyword">throws</span> android.os.RemoteException
</span>{
android.os.Parcel _data = android.os.Parcel.obtain();
android.os.Parcel _reply = android.os.Parcel.obtain();
java.lang.String _result;
<span class="hljs-keyword">try</span> {
_data.writeInterfaceToken(DESCRIPTOR);
_data.writeInt(num);
mRemote.transact(Stub.TRANSACTION_queryPerson, _data, _reply, <span class="hljs-number">0</span>);
_reply.readException();
_result = _reply.readString();
}
<span class="hljs-keyword">finally</span> {
_reply.recycle();
_data.recycle();
}
<span class="hljs-keyword">return</span> _result;
}
}
<span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TRANSACTION_queryPerson = (android.os.IBinder.FIRST_CALL_TRANSACTION + <span class="hljs-number">0</span>);
}
<span class="hljs-keyword">public</span> java.lang.<span class="hljs-function">String <span class="hljs-title">queryPerson</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> <span class="hljs-keyword">throws</span> android.os.RemoteException</span>;
}
</code></pre>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5173;&#x6CE8;&#x7684;&#x53EA;&#x662F;<strong>asInterface(IBinder)</strong>&#x548C;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#x4E2D;&#x7684;<strong>queryPerson()</strong>&#x65B9;&#x6CD5;!</p>
<p>&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x628A;IBinder&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x6210;IPerson&#x7C7B;&#x578B;&#x7684;,&#x5FC5;&#x8981;&#x65F6;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#xFF01;</p>
<p>&#x5176;&#x4ED6;&#x7684;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E0D;&#x770B;&#xFF0C;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#xFF0C;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B65;&#x3002;</p>
<p>Step 2&#xFF1A;**&#x81EA;&#x5B9A;&#x4E49;&#x6211;&#x4EEC;&#x7684;Service&#x7C7B;,&#x5B8C;&#x6210;&#x4E0B;&#x8FF0;&#x64CD;&#x4F5C;:</p>
<ul>
<li><p>1)&#x7EE7;&#x627F;Service&#x7C7B;,&#x540C;&#x65F6;&#x4E5F;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;PersonQueryBinder&#x7C7B;&#x7528;&#x6765;&#x7EE7;&#x627F;IPerson.Stub&#x7C7B; &#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x4E86;IPerson&#x63A5;&#x53E3;&#x548C;IBinder&#x63A5;&#x53E3;</p>
</li>
<li><p>2)&#x5B9E;&#x4F8B;&#x5316;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Stub&#x7C7B;,&#x5E76;&#x91CD;&#x5199;Service&#x7684;onBind&#x65B9;&#x6CD5;,&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;binder&#x5BF9;&#x8C61;!</p>
</li>
</ul>
<p><code>AIDLService.java</code></p>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> com.jay.aidlserver;

<span class="hljs-keyword">import</span> android.app.Service;
<span class="hljs-keyword">import</span> android.content.Intent;
<span class="hljs-keyword">import</span> android.os.IBinder;
<span class="hljs-keyword">import</span> android.os.RemoteException;
<span class="hljs-keyword">import</span> com.jay.aidl.IPerson.Stub;

<span class="hljs-comment">/**
 * Created by Jay on 2015/8/18 0018.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AIDLService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Service</span> </span>{

    <span class="hljs-keyword">private</span> IBinder binder = <span class="hljs-keyword">new</span> PersonQueryBinder();
    <span class="hljs-keyword">private</span> String[] names = {<span class="hljs-string">&quot;B&#x795E;&quot;</span>,<span class="hljs-string">&quot;&#x8279;&#x795E;&quot;</span>,<span class="hljs-string">&quot;&#x57FA;&#x795E;&quot;</span>,<span class="hljs-string">&quot;J&#x795E;&quot;</span>,<span class="hljs-string">&quot;&#x7FD4;&#x795E;&quot;</span>};

    <span class="hljs-function"><span class="hljs-keyword">private</span> String <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span>
    </span>{
        <span class="hljs-keyword">if</span>(num &gt; <span class="hljs-number">0</span> &amp;&amp; num &lt; <span class="hljs-number">6</span>){
            <span class="hljs-keyword">return</span> names[num - <span class="hljs-number">1</span>];
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IBinder <span class="hljs-title">onBind</span><span class="hljs-params">(Intent intent)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PersonQueryBinder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Stub</span></span>{
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">queryPerson</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> <span class="hljs-keyword">throws</span> RemoteException </span>{
            <span class="hljs-keyword">return</span> query(num);
        }
    }
}
</code></pre>
<p>Step 3&#xFF1A;&#x5728;AndroidManifest.xml&#x6587;&#x4EF6;&#x4E2D;&#x6CE8;&#x518C;Service</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;.AIDLService&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.action.AIDLService&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
</code></pre>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;Activity&#x754C;&#x9762;&#xFF0C;&#x4F46;&#x662F;&#x6539;&#x5E94;&#x7528;&#x63D0;&#x4F9B;&#x7684;Service&#x53EF;&#x4EE5;&#x4F9B;&#x5176;&#x4ED6;app&#x6765;&#x8C03;&#x7528;&#xFF01;</p>
<p><strong>2.&#x5BA2;&#x6237;&#x7AEF;</strong></p>
<p>&#x76F4;&#x63A5;&#x628A;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x90A3;&#x4E2A;aidl&#x6587;&#x4EF6;&#x590D;&#x5236;&#x8FC7;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;MainActivity&#x4E2D;&#x5B8C;&#x6210;&#xFF0C;&#x548C;&#x7ED1;&#x5B9A;&#x672C;&#x5730;Service&#x7684;&#x64CD;&#x4F5C;
&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#xFF0C;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>1)&#x81EA;&#x5B9A;&#x4E49;PersonConnection&#x7C7B;&#x5B9E;&#x73B0;ServiceConnection&#x63A5;&#x53E3;</li>
<li>2)&#x4EE5;PersonConnection&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;,&#x8C03;&#x7528;bindService&#x7ED1;&#x5B9A;&#x8FDC;&#x7A0B;Service
bindService(service,conn,BIND_AUTO_CREATE);</li>
</ul>
<p>ps:&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x8BBE;&#x7F6E;&#x5982;&#x679C;&#x670D;&#x52A1;&#x6CA1;&#x6709;&#x542F;&#x52A8;&#x7684;&#x8BDD;,&#x81EA;&#x52A8;&#x521B;&#x5EFA;</p>
<ul>
<li>3)&#x548C;&#x672C;&#x5730;Service&#x4E0D;&#x540C;&#xFF0C;&#x7ED1;&#x5B9A;&#x8FDC;&#x7A0B;Service&#x7684;ServiceConnection&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x83B7;&#x53D6;Service&#x7684;onBind( )&#x65B9;&#x6CD5;
&#x8FD4;&#x56DE;&#x7684;IBinder&#x5BF9;&#x8C61;&#xFF0C;&#x53EA;&#x80FD;&#x8FD4;&#x56DE;onBind( )&#x65B9;&#x6CD5;&#x6240;&#x8FD4;&#x56DE;&#x7684;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x9700;&#x8981;&#x505A;&#x5982;&#x4E0B;&#x5904;&#x7406;:
iPerson = IPerson.Stub.asInterface(service);
&#x518D;&#x63A5;&#x7740;&#x5B8C;&#x6210;&#x521D;&#x59CB;&#x5316;,&#x4EE5;&#x53CA;&#x6309;&#x94AE;&#x4E8B;&#x4EF6;&#x7B49;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;</li>
</ul>
<p>&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><code>MainActivity.java</code></p>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> com.jay.aidlclient;

<span class="hljs-keyword">import</span> android.content.ComponentName;
<span class="hljs-keyword">import</span> android.content.Intent;
<span class="hljs-keyword">import</span> android.content.ServiceConnection;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.os.IBinder;
<span class="hljs-keyword">import</span> android.os.RemoteException;
<span class="hljs-keyword">import</span> android.support.v7.app.AppCompatActivity;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.widget.Button;
<span class="hljs-keyword">import</span> android.widget.EditText;
<span class="hljs-keyword">import</span> android.widget.TextView;

<span class="hljs-keyword">import</span> com.jay.aidl.IPerson;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">View</span>.<span class="hljs-title">OnClickListener</span></span>{

    <span class="hljs-keyword">private</span> EditText edit_num;
    <span class="hljs-keyword">private</span> Button btn_query;
    <span class="hljs-keyword">private</span> TextView txt_name;
    <span class="hljs-keyword">private</span> IPerson iPerson;
    <span class="hljs-keyword">private</span> PersonConnection conn = <span class="hljs-keyword">new</span> PersonConnection();


    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        bindViews();
        <span class="hljs-comment">//&#x7ED1;&#x5B9A;&#x8FDC;&#x7A0B;Service</span>
        Intent service = <span class="hljs-keyword">new</span> Intent(<span class="hljs-string">&quot;android.intent.action.AIDLService&quot;</span>);
        service.setPackage(<span class="hljs-string">&quot;com.jay.aidlserver&quot;</span>);

        bindService(service, conn, BIND_AUTO_CREATE);
        btn_query.setOnClickListener(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bindViews</span><span class="hljs-params">()</span> </span>{
        edit_num = (EditText) findViewById(R.id.edit_num);
        btn_query = (Button) findViewById(R.id.btn_query);
        txt_name = (TextView) findViewById(R.id.txt_name);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{
        String number = edit_num.getText().toString();
        <span class="hljs-keyword">int</span> num = Integer.valueOf(number);
        <span class="hljs-keyword">try</span> {
            txt_name.setText(iPerson.queryPerson(num));
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
            e.printStackTrace();
        }
        edit_num.setText(<span class="hljs-string">&quot;&quot;</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PersonConnection</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ServiceConnection</span> </span>{
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServiceConnected</span><span class="hljs-params">(ComponentName name, IBinder service)</span> </span>{
            iPerson = IPerson.Stub.asInterface(service);
        }
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServiceDisconnected</span><span class="hljs-params">(ComponentName name)</span> </span>{
            iPerson = <span class="hljs-keyword">null</span>;
        }
    }
}
</code></pre>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5148;&#x542F;&#x52A8;AIDLServivce&#xFF0C;&#x7136;&#x540E;&#x518D;&#x542F;&#x52A8;AIDLClient&#xFF0C;&#x8F93;&#x5165;&#x67E5;&#x8BE2;&#x5E8F;&#x53F7;&#xFF0C;&#x5373;&#x53EF;&#x83B7;&#x5F97;&#x5BF9;&#x5E94;&#x59D3;&#x540D;&#xFF01; &#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x542F;&#x52A8;AIDLClient&#xFF0C;&#x4E5F;&#x4F1A;&#x83B7;&#x5F97;&#x540C;&#x6837;&#x6548;&#x679C;&#xFF1A;</p>
<p>&#x6548;&#x679C;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="../img/component-41.jpg" alt=""></p>
<h3 id="3&#xFF09;&#x4F20;&#x9012;&#x590D;&#x6742;&#x6570;&#x636E;&#x7684;aidl-service">3&#xFF09;&#x4F20;&#x9012;&#x590D;&#x6742;&#x6570;&#x636E;&#x7684;AIDL Service</h3>
<p>&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x6211;&#x4EEC;&#x4F20;&#x9012;&#x7684;&#x53EA;&#x662F;&#x8981;&#x7ED9;int&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x670D;&#x52A1;&#x7AEF;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;String&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x770B;&#x4F3C;&#x6EE1;&#x8DB3; &#x6211;&#x4EEC;&#x7684;&#x57FA;&#x672C;&#x9700;&#x6C42;&#xFF0C;&#x4E0D;&#x8FC7;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x8003;&#x8651;&#x4F20;&#x9012;&#x590D;&#x6742;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x60C5;&#x51B5;&#xFF01;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x5B66;&#x4E60;&#x4E0B; &#x5982;&#x4F55;&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x4F20;&#x9012;&#x590D;&#x6742;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF01;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x4E86;&#x89E3;Parcelable&#x63A5;&#x53E3;&#xFF01;</p>
<p>&#x2014;&#x2014;Parcelable&#x63A5;&#x53E3;&#x7B80;&#x4ECB;&#xFF1A;</p>
<p>&#x76F8;&#x4FE1;&#x7528;&#x8FC7;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x57FA;&#x672C;&#x4E0A;&#x90FD;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x4E86;&#xFF0C;&#x9664;&#x4E86;&#x4ED6;&#x8FD8;&#x6709;&#x53E6;&#x5916;&#x4E00;&#x4E2A;Serializable&#xFF0C;&#x540C;&#x6837;&#x662F;&#x7528;&#x4E8E;&#x5E8F;&#x5217;&#x5316;&#x7684;&#xFF0C; &#x53EA;&#x662F;Parcelable&#x66F4;&#x52A0;&#x8F7B;&#x91CF;&#x7EA7;&#xFF0C;&#x901F;&#x5EA6;&#x66F4;&#x5FEB;&#xFF01;&#x4F46;&#x662F;&#x5199;&#x8D77;&#x6765;&#x5C31;&#x6709;&#x70B9;&#x9EBB;&#x70E6;&#x4E86;&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x679C;&#x4F60;&#x7528;&#x7684;as&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x7528; &#x7684;&#x63D2;&#x4EF6;&#x6765;&#x5B8C;&#x6210;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;Android Parcelable Code Generator &#x5F53;&#x7136;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x624B;&#x628A;&#x624B;&#x6559;&#x5927;&#x5BB6;&#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;~</p>
<p>&#x9996;&#x5148;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#xFF1A;writeToParcel&#x548C;readFromPacel&#x65B9;&#x6CD5; &#x5199;&#x5165;&#x65B9;&#x6CD5;&#x5C06;&#x5BF9;&#x8C61;&#x5199;&#x5165;&#x5230;&#x5305;&#x88F9;(parcel)&#x4E2D;,&#x800C;&#x8BFB;&#x53D6;&#x65B9;&#x6CD5;&#x5219;&#x4ECE;&#x5305;&#x88F9;&#x4E2D;&#x8BFB;&#x53D6;&#x5BF9;&#x8C61;, &#x8BF7;&#x6CE8;&#x610F;,&#x5199;&#x5165;&#x5C5E;&#x6027;&#x987A;&#x5E8F;&#x9700;&#x4E0E;&#x8BFB;&#x53D6;&#x987A;&#x5E8F;&#x76F8;&#x540C;</p>
<p>&#x63A5;&#x7740;&#x9700;&#x8981;&#x5728;&#xFF1A;&#x8BE5;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;CREATOR&#x7684;static final&#x5C5E;&#x6027; &#x6539;&#x5C5E;&#x6027;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#xFF1A;android.os.Parcelable.Creator&#x63A5;&#x53E3;</p>
<p>&#x518D;&#x63A5;&#x7740;&#x9700;&#x8981;&#x4ECE;&#x5199;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A; createFromParcel(Parcel source)&#x65B9;&#x6CD5;:&#x5B9E;&#x73B0;&#x4ECE;source&#x521B;&#x5EFA;&#x51FA;JavaBean&#x5B9E;&#x4F8B;&#x7684;&#x529F;&#x80FD; newArray(int size):&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x4E3A;T,&#x957F;&#x5EA6;&#x4E3A;size&#x7684;&#x6570;&#x7EC4;,&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;return new T[size]; (&#x8FD9;&#x91CC;&#x7684;T&#x662F;Person&#x7C7B;)</p>
<p>&#x6700;&#x540E;&#xFF0C;describeContents():&#x8FD9;&#x4E2A;&#x6211;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x662F;&#x62FF;&#x6765;&#x5E72;&#x561B;&#x7684;,&#x76F4;&#x63A5;&#x8FD4;&#x56DE;0&#x5373;&#x53EF;&#xFF01;&#x4E0D;&#x7528;&#x7406;&#x4ED6;</p>
<p>&#x2014;&#x2014;&#x53E6;&#x5916;&#xFF0C;&#x975E;&#x539F;&#x59CB;&#x7C7B;&#x578B;&#x4E2D;&#xFF0C;&#x9664;&#x4E86;String&#x548C;CharSequence&#x4EE5;&#x5916;&#xFF0C;&#x5176;&#x4F59;&#x5747;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x65B9;&#x5411;&#x6307;&#x793A;&#x7B26;&#x3002; &#x65B9;&#x5411;&#x6307;&#x793A;&#x7B26;&#x5305;&#x62EC; in&#x3001;out&#x3001;&#x548C;inout&#x3002;in&#x8868;&#x793A;&#x7531;&#x5BA2;&#x6237;&#x7AEF;&#x8BBE;&#x7F6E;&#xFF0C;out&#x8868;&#x793A;&#x7531;&#x670D;&#x52A1;&#x7AEF;&#x8BBE;&#x7F6E;&#xFF0C;inout&#x8868;&#x793A;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x90FD;&#x8BBE;&#x7F6E;&#x4E86;&#x8BE5;&#x503C;&#x3002;</p>
<p>&#x597D;&#x7684;&#xFF0C;&#x63A5;&#x7740;&#x6765;&#x5199;&#x4EE3;&#x7801;&#x8BD5;&#x8BD5;(AS&#x8FD9;&#x91CC;&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x6709;&#x70B9;&#x95EE;&#x9898;&#xFF0C;&#x6682;&#x65F6;&#x8FD8;&#x6CA1;&#x89E3;&#x51B3;&#xFF0C;&#x5C31;&#x7528;&#x56DE;Eclipse~)&#xFF1A;</p>
<p>&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x4E24;&#x79CD;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;:Person&#x4E0E;Salary,Person&#x4F5C;&#x4E3A;&#x8C03;&#x7528;&#x8FDC;&#x7A0B;&#x7684;Service&#x7684;&#x53C2;&#x6570;,Salary&#x4F5C;&#x4E3A;&#x8FD4;&#x56DE;&#x503C;! &#x90A3;&#x4E48;&#x9996;&#x5148;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x521B;&#x5EFA;Person&#x4E0E;Salary&#x7C7B;,&#x540C;&#x65F6;&#x9700;&#x8981;&#x5B9E;&#x73B0;Parcelable&#x63A5;&#x53E3;</p>
<p>1.&#x2014;&#x2014;&#x670D;&#x52A1;&#x7AEF;</p>
<p>Step 1&#xFF1A;&#x521B;&#x5EFA;Person.aidl&#x548C;Salary.aidl&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x4EEC;&#x9700;&#x8981;&#x5B9E;&#x73B0;Parcelable&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x4E0B;&#x9762;&#x4E00;&#x6761;&#x8BED;&#x53E5;&#xFF1A;</p>
<pre><code class="lang-java">Person.aidl:     parcelable Person; 
Salary.aidl:     parcelable Salary; Step <span class="hljs-number">2</span>&#xFF1A;&#x5206;&#x522B;&#x5EFA;&#x7ACB;Person&#x7C7B;&#x4E0E;Salary&#x7C7B;&#xFF0C;&#x9700;&#x5B9E;&#x73B0;Parcelable&#x63A5;&#x53E3;&#xFF0C;&#x91CD;&#x5199;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;!
</code></pre>
<p>PS:&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x540E;&#x9762;&#x662F;&#x6839;&#x636E;Person&#x5BF9;&#x8C61;&#x6765;&#x83B7;&#x53D6;Map&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6570;&#x636E;,&#x6240;&#x4EE5;Person.java&#x4E2D;&#x6211;&#x4EEC;&#x91CD;&#x5199;&#x4E86;hashcode&#x548C;equals &#x7684;&#x65B9;&#x6CD5;;&#x800C;Salary&#x7C7B;&#x5219;&#x4E0D;&#x9700;&#x8981;!</p>
<p><code>Person.java:</code></p>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> com.jay.example.aidl; 

<span class="hljs-keyword">import</span> android.os.Parcel;
<span class="hljs-keyword">import</span> android.os.Parcelable;

<span class="hljs-comment">/**
 * Created by Jay on 2015/8/18 0018.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Parcelable</span></span>{

    <span class="hljs-keyword">private</span> Integer id;
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span><span class="hljs-params">()</span> </span>{}

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span><span class="hljs-params">(Integer id, String name)</span> </span>{
        <span class="hljs-keyword">this</span>.id = id;
        <span class="hljs-keyword">this</span>.name = name;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(Integer id)</span> </span>{
        <span class="hljs-keyword">this</span>.id = id;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
        <span class="hljs-keyword">this</span>.name = name;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> name;
    }


    <span class="hljs-comment">//&#x5B9E;&#x73B0;Parcelable&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;,&#x4E0D;&#x77E5;&#x9053;&#x62FF;&#x6765;&#x5E72;&#x561B;&#x7684;,&#x76F4;&#x63A5;&#x8FD4;&#x56DE;0&#x5C31;&#x884C;&#x4E86;</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">describeContents</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }


    <span class="hljs-comment">//&#x5199;&#x5165;&#x6570;&#x636E;&#x5230;Parcel&#x4E2D;&#x7684;&#x65B9;&#x6CD5;</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeToParcel</span><span class="hljs-params">(Parcel dest, <span class="hljs-keyword">int</span> flags)</span> </span>{
        <span class="hljs-comment">//&#x628A;&#x5BF9;&#x8C61;&#x6240;&#x5305;&#x542B;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;parcel&#x4E2D;</span>
        dest.writeInt(id);
        dest.writeString(name);
    }

    <span class="hljs-comment">//&#x5FC5;&#x987B;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;CREATOR&#x7684;static final&#x5C5E;&#x6027; &#x8BE5;&#x5C5E;&#x6027;&#x9700;&#x8981;&#x5B9E;&#x73B0;</span>
    <span class="hljs-comment">//android.os.Parcelable.Creator&lt;T&gt;&#x63A5;&#x53E3;</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Parcelable.Creator&lt;Person&gt; CREATOR = <span class="hljs-keyword">new</span> Parcelable.Creator&lt;Person&gt;() {
        <span class="hljs-comment">//&#x4ECE;Parcel&#x4E2D;&#x8BFB;&#x53D6;&#x6570;&#x636E;,&#x8FD4;&#x56DE;Person&#x5BF9;&#x8C61;</span>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> Person <span class="hljs-title">createFromParcel</span><span class="hljs-params">(Parcel source)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person(source.readInt(),source.readString());
        }
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Person[] newArray(<span class="hljs-keyword">int</span> size) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Person[size];
        }
    };

    <span class="hljs-comment">//&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x96C6;&#x5408;&#x53D6;&#x51FA;&#x5143;&#x7D20;&#x7684;&#x65F6;&#x5019;&#x662F;&#x6839;&#x636E;Person&#x5BF9;&#x8C61;&#x6765;&#x53D6;&#x5F97;,&#x6240;&#x4EE5;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;,</span>
    <span class="hljs-comment">//&#x9700;&#x8981;&#x6211;&#x4EEC;&#x91CD;&#x5199;hashCode()&#x548C;equals()&#x65B9;&#x6CD5;</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> prime = <span class="hljs-number">31</span>;
        <span class="hljs-keyword">int</span> result = <span class="hljs-number">1</span>;
        result = prime * result + ((name == <span class="hljs-keyword">null</span>) ? <span class="hljs-number">0</span> : name.hashCode());
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object obj)</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == obj)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">if</span> (getClass() != obj.getClass())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        Person other = (Person) obj;
        <span class="hljs-keyword">if</span> (name == <span class="hljs-keyword">null</span>)
        {
            <span class="hljs-keyword">if</span> (other.name != <span class="hljs-keyword">null</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!name.equals(other.name))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
}
</code></pre>
<p><strong>Salary.java&#x7167;&#x846B;&#x82A6;&#x753B;&#x74E2;</strong></p>
<pre><code>package com.jay.example.aidl; 

import android.os.Parcel;
import android.os.Parcelable;

/**
 * Created by Jay on 2015/8/18 0018.
 */
public class Salary implements Parcelable {

    private String type;
    private Integer salary;

    public Salary() {
    }

    public Salary(String type, Integer salary) {
        this.type = type;
        this.salary = salary;
    }

    public String getType() {
        return type;
    }

    public Integer getSalary() {
        return salary;
    }

    public void setType(String type) {
        this.type = type;
    }

    public void setSalary(Integer salary) {
        this.salary = salary;
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(type);
        dest.writeInt(salary);
    }

    public static final Parcelable.Creator&lt;Salary&gt; CREATOR = new Parcelable.Creator&lt;Salary&gt;() {
        //&#x4ECE;Parcel&#x4E2D;&#x8BFB;&#x53D6;&#x6570;&#x636E;,&#x8FD4;&#x56DE;Person&#x5BF9;&#x8C61;
        @Override
        public Salary createFromParcel(Parcel source) {
            return new Salary(source.readString(), source.readInt());
        }

        @Override
        public Salary[] newArray(int size) {
            return new Salary[size];
        }
    };

    public String toString() {
        return &quot;&#x5DE5;&#x4F5C;:&quot; + type + &quot;    &#x85AA;&#x6C34;: &quot; + salary;
    }
}
</code></pre><p>Step 3&#xFF1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;ISalary.aidl&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x91CC;&#x9762;&#x5199;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x83B7;&#x53D6;&#x5DE5;&#x8D44;&#x4FE1;&#x606F;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> com.jay.example.aidl;

<span class="hljs-keyword">import</span> com.jay.example.aidl.Salary;  
<span class="hljs-keyword">import</span> com.jay.example.aidl.Person;  
<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ISalary</span>  
</span>{  
    <span class="hljs-comment">//&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;Person&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x4F20;&#x5165;&#x53C2;&#x6570;  </span>
    <span class="hljs-comment">//&#x63A5;&#x53E3;&#x4E2D;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;&#x65F6;,&#x9700;&#x8981;&#x5236;&#x5B9A;&#x65B0;&#x53C2;&#x7684;&#x4F20;&#x9012;&#x6A21;&#x5F0F;,&#x8FD9;&#x91CC;&#x662F;&#x4F20;&#x5165;,&#x6240;&#x4EE5;&#x524D;&#x9762;&#x6709;&#x4E00;&#x4E2A;in  </span>
    <span class="hljs-function">Salary <span class="hljs-title">getMsg</span><span class="hljs-params">(in Person owner)</span></span>;  
}
</code></pre>
<p>ps:&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x8BB0;&#x5F97;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x8BDD;,&#x9700;&#x8981;import&#x54E6;&#xFF01;&#xFF01;&#xFF01;&#x5207;&#x8BB0;&#xFF01;&#xFF01;&#xFF01;</p>
<p>Step 4&#xFF1A;&#x6838;&#x5FC3;Service&#x7684;&#x7F16;&#x5199;&#xFF1A; &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;SalaryBinder&#x7C7B;&#x7EE7;&#x627F;Stub,&#x4ECE;&#x800C;&#x5B9E;&#x73B0;ISalary&#x548C;IBinder&#x63A5;&#x53E3;;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5B58;&#x50A8;&#x4FE1;&#x606F;&#x7684;Map&#x96C6;&#x5408;! &#x91CD;&#x65B0;onBind&#x65B9;&#x6CD5;,&#x8FD4;&#x56DE;SalaryBinder&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;!</p>
<p><code>AidlService.java</code></p>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> com.jay.example.aidl_complexservice;  

<span class="hljs-keyword">import</span> java.util.HashMap;  
<span class="hljs-keyword">import</span> java.util.Map;  
<span class="hljs-keyword">import</span> com.jay.example.aidl.ISalary.Stub;  
<span class="hljs-keyword">import</span> com.jay.example.aidl.Person;  
<span class="hljs-keyword">import</span> com.jay.example.aidl.Salary;  
<span class="hljs-keyword">import</span> android.app.Service;  
<span class="hljs-keyword">import</span> android.content.Intent;  
<span class="hljs-keyword">import</span> android.os.IBinder;  
<span class="hljs-keyword">import</span> android.os.RemoteException;  

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AidlService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Service</span> </span>{  

    <span class="hljs-keyword">private</span> SalaryBinder salaryBinder;  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;Person,Salary&gt; ss = <span class="hljs-keyword">new</span> HashMap&lt;Person, Salary&gt;();  
    <span class="hljs-comment">//&#x521D;&#x59CB;&#x5316;Map&#x96C6;&#x5408;,&#x8FD9;&#x91CC;&#x5728;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;,&#x5F53;&#x7136;&#x4F60;&#x53EF;&#x4E5F;&#x4EE5;&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x5B8C;&#x6210;&#x521D;&#x59CB;&#x5316;  </span>
    <span class="hljs-keyword">static</span>  
    {  
        ss.put(<span class="hljs-keyword">new</span> Person(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;Jay&quot;</span>), <span class="hljs-keyword">new</span> Salary(<span class="hljs-string">&quot;&#x7801;&#x519C;&quot;</span>, <span class="hljs-number">2000</span>));  
        ss.put(<span class="hljs-keyword">new</span> Person(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;GEM&quot;</span>), <span class="hljs-keyword">new</span> Salary(<span class="hljs-string">&quot;&#x6B4C;&#x624B;&quot;</span>, <span class="hljs-number">20000</span>));  
        ss.put(<span class="hljs-keyword">new</span> Person(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;XM&quot;</span>), <span class="hljs-keyword">new</span> Salary(<span class="hljs-string">&quot;&#x5B66;&#x751F;&quot;</span>, <span class="hljs-number">20</span>));  
        ss.put(<span class="hljs-keyword">new</span> Person(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;MrWang&quot;</span>), <span class="hljs-keyword">new</span> Salary(<span class="hljs-string">&quot;&#x8001;&#x5E08;&quot;</span>, <span class="hljs-number">2000</span>));  
    }  


    <span class="hljs-meta">@Override</span>  
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span> </span>{  
        <span class="hljs-keyword">super</span>.onCreate();  
        salaryBinder = <span class="hljs-keyword">new</span> SalaryBinder();  
    }  

    <span class="hljs-meta">@Override</span>  
    <span class="hljs-function"><span class="hljs-keyword">public</span> IBinder <span class="hljs-title">onBind</span><span class="hljs-params">(Intent intent)</span> </span>{  
        <span class="hljs-keyword">return</span> salaryBinder;  
    }  


    <span class="hljs-comment">//&#x540C;&#x6837;&#x662F;&#x7EE7;&#x627F;Stub,&#x5373;&#x540C;&#x65F6;&#x5B9E;&#x73B0;ISalary&#x63A5;&#x53E3;&#x548C;IBinder&#x63A5;&#x53E3;  </span>
    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SalaryBinder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Stub</span>  
    </span>{  
        <span class="hljs-meta">@Override</span>  
        <span class="hljs-function"><span class="hljs-keyword">public</span> Salary <span class="hljs-title">getMsg</span><span class="hljs-params">(Person owner)</span> <span class="hljs-keyword">throws</span> RemoteException </span>{  
            <span class="hljs-keyword">return</span> ss.get(owner);  
        }  
    }  

    <span class="hljs-meta">@Override</span>  
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span> </span>{  
        System.out.println(<span class="hljs-string">&quot;&#x670D;&#x52A1;&#x7ED3;&#x675F;&#xFF01;&quot;</span>);  
        <span class="hljs-keyword">super</span>.onDestroy();  
    }  
}
</code></pre>
<p>&#x6CE8;&#x518C;&#x4E0B;Service:</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;.AidlService&quot;</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>    
        <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.action.AIDLService&quot;</span> /&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>    
<span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
</code></pre>
<p>2&#x2014;&#x2014;&#x5BA2;&#x6237;&#x7AEF;&#x7F16;&#x5199;</p>
<p>Step 1&#xFF1A;&#x628A;&#x670D;&#x52A1;&#x7AEF;&#x7684;AIDL&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x4E0B;&#xFF0C;&#x62F7;&#x8D1D;&#x540E;&#x76EE;&#x5F55;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="../img/component-42.jpg" alt=""></p>
<p>Step 2&#xFF1A;&#x7F16;&#x5199;&#x7B80;&#x5355;&#x7684;&#x5E03;&#x5C40;,&#x518D;&#x63A5;&#x7740;&#x5C31;&#x662F;&#x6838;&#x5FC3;MainActvitiy&#x7684;&#x5B9E;&#x73B0;&#x4E86; &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;ServciceConnection&#x5BF9;&#x8C61;,&#x91CD;&#x5199;&#x5BF9;&#x5E94;&#x65B9;&#x6CD5;,&#x548C;&#x524D;&#x9762;&#x7684;&#x666E;&#x901A;&#x6570;&#x636E;&#x7684;&#x7C7B;&#x4F3C; &#x518D;&#x63A5;&#x7740;&#x5728;bindService,&#x7136;&#x540E;&#x518D;Button&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x4E2D;&#x83B7;&#x53D6;Salary&#x5BF9;&#x8C61;&#x5E76;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF01;</p>
<p><code>MainActivity.java</code></p>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> com.jay.example.aidl_complexclient;  

<span class="hljs-keyword">import</span> com.jay.example.aidl.ISalary;  
<span class="hljs-keyword">import</span> com.jay.example.aidl.Person;  
<span class="hljs-keyword">import</span> com.jay.example.aidl.Salary;  

<span class="hljs-keyword">import</span> android.app.Activity;  
<span class="hljs-keyword">import</span> android.app.Service;  
<span class="hljs-keyword">import</span> android.content.ComponentName;  
<span class="hljs-keyword">import</span> android.content.Intent;  
<span class="hljs-keyword">import</span> android.content.ServiceConnection;  
<span class="hljs-keyword">import</span> android.os.Bundle;  
<span class="hljs-keyword">import</span> android.os.IBinder;  
<span class="hljs-keyword">import</span> android.os.RemoteException;  
<span class="hljs-keyword">import</span> android.view.View;  
<span class="hljs-keyword">import</span> android.view.View.OnClickListener;  
<span class="hljs-keyword">import</span> android.widget.Button;  
<span class="hljs-keyword">import</span> android.widget.EditText;  
<span class="hljs-keyword">import</span> android.widget.TextView;  


<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> </span>{  

    <span class="hljs-keyword">private</span> ISalary salaryService;  
    <span class="hljs-keyword">private</span> Button btnquery;  
    <span class="hljs-keyword">private</span> EditText editname;  
    <span class="hljs-keyword">private</span> TextView textshow;  
    <span class="hljs-keyword">private</span> ServiceConnection conn = <span class="hljs-keyword">new</span> ServiceConnection() {  

        <span class="hljs-meta">@Override</span>  
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServiceDisconnected</span><span class="hljs-params">(ComponentName name)</span> </span>{  
            salaryService = <span class="hljs-keyword">null</span>;  
        }  

        <span class="hljs-meta">@Override</span>  
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServiceConnected</span><span class="hljs-params">(ComponentName name, IBinder service)</span> </span>{  
            <span class="hljs-comment">//&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;,&#x8981;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x54E6;!  </span>
            salaryService = ISalary.Stub.asInterface(service);  
        }  
    };  


    <span class="hljs-meta">@Override</span>  
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{  
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);  
        setContentView(R.layout.activity_main);  

        btnquery = (Button) findViewById(R.id.btnquery);  
        editname = (EditText) findViewById(R.id.editname);  
        textshow = (TextView) findViewById(R.id.textshow);  

        Intent it = <span class="hljs-keyword">new</span> Intent();  
        it.setAction(<span class="hljs-string">&quot;com.jay.aidl.AIDL_SERVICE&quot;</span>);  
        bindService(it, conn, Service.BIND_AUTO_CREATE);  

        btnquery.setOnClickListener(<span class="hljs-keyword">new</span> OnClickListener() {           
            <span class="hljs-meta">@Override</span>  
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{  
                <span class="hljs-keyword">try</span>  
                {  
                    String name = editname.getText().toString();  
                    Salary salary = salaryService.getMsg(<span class="hljs-keyword">new</span> Person(<span class="hljs-number">1</span>,name));  
                    textshow.setText(name + salary.toString());  
                }<span class="hljs-keyword">catch</span>(RemoteException e){e.printStackTrace();}  
            }  
        });  

    }  
    <span class="hljs-meta">@Override</span>  
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span> </span>{  
        <span class="hljs-keyword">super</span>.onDestroy();  
        <span class="hljs-keyword">this</span>.unbindService(conn);  
    }  
}
</code></pre>
<p>&#x8FD0;&#x884C;&#x622A;&#x56FE;&#xFF1A;</p>
<p><img src="../img/component-43.jpg" alt=""></p>
<p>PS&#xFF1A; &#x8FD9;&#x91CC;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x4E4B;&#x524D;&#x7528;Eclipse&#x5199;&#x7684;&#x4EE3;&#x7801;&#xFF0C;Android Studio&#x4E0B;&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x6709;&#x70B9;&#x95EE;&#x9898;&#xFF0C; &#x6682;&#x65F6;&#x6CA1;&#x627E;&#x5230;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;&#x77E5;&#x9053;&#x7684;&#x670B;&#x53CB;&#x8BF7;&#x544A;&#x77E5;&#x4E0B;&#xFF01;&#xFF01;&#xFF01;&#x4E07;&#x5206;&#x611F;&#x6FC0;&#xFF01;&#xFF01;&#xFF01; &#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x5982;&#x4E0B;&#xFF1A; </p>
<p><img src="../img/component-44.jpg" alt=""></p>
<p>&#x4E24;&#x4E2A;&#x5B9E;&#x4F8B;&#x7684;&#x4EE3;&#x7801;&#x4E0B;&#x8F7D;(&#x57FA;&#x4E8E;Eclipse&#x7684;)&#xFF1A;</p>
<ul>
<li>1&#xFF09;<a href="../img/AIDL-sample-demo.zip">&#x4F7F;&#x7528;AIDL&#x5B8C;&#x6210;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x7B80;&#x5355;&#x901A;&#x4FE1;</a></li>
<li>2&#xFF09;<a href="../img/complex-data-AIDL.zip">&#x4F20;&#x9012;&#x590D;&#x6742;&#x6570;&#x636E;&#x7684;AIDL Service&#x7684;&#x5B9E;&#x73B0;</a></li>
</ul>
<h2 id="&#x56DB;&#x3001;&#x76F4;&#x63A5;&#x901A;&#x8FC7;binder&#x7684;ontransact&#x5B8C;&#x6210;&#x8DE8;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;">&#x56DB;&#x3001;&#x76F4;&#x63A5;&#x901A;&#x8FC7;Binder&#x7684;onTransact&#x5B8C;&#x6210;&#x8DE8;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;</h2>
<p>&#x4E0A;&#x9762;&#x8BB2;&#x8FC7;Android&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Binder&#x7684;onTrensact&#x65B9;&#x6CD5;&#x6765;&#x5B8C;&#x6210;&#x901A;&#x4FE1;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x6765;&#x7B80;&#x5355;&#x8BD5;&#x4E0B;&#x4E0B;&#xFF0C;&#x8FD8;&#x662F;&#x524D;&#x9762;&#x90A3;&#x4E2A;&#x6839;&#x636E; &#x5E8F;&#x53F7;&#x67E5;&#x8BE2;&#x540D;&#x5B57;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<p><strong>&#x670D;&#x52A1;&#x7AEF;&#x5B9E;&#x73B0;&#xFF1A;</strong></p>
<pre><code class="lang-java"><span class="hljs-comment">/**
 * Created by Jay on 2015/8/18 0018.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IPCService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Service</span></span>{

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String DESCRIPTOR = <span class="hljs-string">&quot;IPCService&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String[] names = {<span class="hljs-string">&quot;B&#x795E;&quot;</span>,<span class="hljs-string">&quot;&#x8279;&#x795E;&quot;</span>,<span class="hljs-string">&quot;&#x57FA;&#x795E;&quot;</span>,<span class="hljs-string">&quot;J&#x795E;&quot;</span>,<span class="hljs-string">&quot;&#x7FD4;&#x795E;&quot;</span>};
    <span class="hljs-keyword">private</span> MyBinder mBinder = <span class="hljs-keyword">new</span> MyBinder();


    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBinder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Binder</span> </span>{
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onTransact</span><span class="hljs-params">(<span class="hljs-keyword">int</span> code, Parcel data, Parcel reply, <span class="hljs-keyword">int</span> flags)</span> <span class="hljs-keyword">throws</span> RemoteException </span>{
            <span class="hljs-keyword">switch</span> (code){
                <span class="hljs-keyword">case</span> <span class="hljs-number">0x001</span>: {
                    data.enforceInterface(DESCRIPTOR);
                    <span class="hljs-keyword">int</span> num = data.readInt();
                    reply.writeNoException();
                    reply.writeString(names[num]);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onTransact(code, data, reply, flags);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IBinder <span class="hljs-title">onBind</span><span class="hljs-params">(Intent intent)</span> </span>{
        <span class="hljs-keyword">return</span> mBinder;
    }
}
</code></pre>
<p>&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">View</span>.<span class="hljs-title">OnClickListener</span></span>{

    <span class="hljs-keyword">private</span> EditText edit_num;
    <span class="hljs-keyword">private</span> Button btn_query;
    <span class="hljs-keyword">private</span> TextView txt_result;
    <span class="hljs-keyword">private</span> IBinder mIBinder;
    <span class="hljs-keyword">private</span> ServiceConnection PersonConnection  = <span class="hljs-keyword">new</span> ServiceConnection()
    {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServiceDisconnected</span><span class="hljs-params">(ComponentName name)</span>
        </span>{
            mIBinder = <span class="hljs-keyword">null</span>;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServiceConnected</span><span class="hljs-params">(ComponentName name, IBinder service)</span>
        </span>{
            mIBinder = service;
        }
    };

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        bindViews();

        <span class="hljs-comment">//&#x7ED1;&#x5B9A;&#x8FDC;&#x7A0B;Service</span>
        Intent service = <span class="hljs-keyword">new</span> Intent(<span class="hljs-string">&quot;android.intent.action.IPCService&quot;</span>);
        service.setPackage(<span class="hljs-string">&quot;com.jay.ipcserver&quot;</span>);
        bindService(service, PersonConnection, BIND_AUTO_CREATE);
        btn_query.setOnClickListener(<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bindViews</span><span class="hljs-params">()</span> </span>{
        edit_num = (EditText) findViewById(R.id.edit_num);
        btn_query = (Button) findViewById(R.id.btn_query);
        txt_result = (TextView) findViewById(R.id.txt_result);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{
        <span class="hljs-keyword">int</span> num = Integer.parseInt(edit_num.getText().toString());
        <span class="hljs-keyword">if</span> (mIBinder == <span class="hljs-keyword">null</span>)
        {
            Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">&quot;&#x672A;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x7AEF;&#x6216;&#x670D;&#x52A1;&#x7AEF;&#x88AB;&#x5F02;&#x5E38;&#x6740;&#x6B7B;&quot;</span>, Toast.LENGTH_SHORT).show();
        } <span class="hljs-keyword">else</span> {
            android.os.Parcel _data = android.os.Parcel.obtain();
            android.os.Parcel _reply = android.os.Parcel.obtain();
            String _result = <span class="hljs-keyword">null</span>;
            <span class="hljs-keyword">try</span>{
                _data.writeInterfaceToken(<span class="hljs-string">&quot;IPCService&quot;</span>);
                _data.writeInt(num);
                mIBinder.transact(<span class="hljs-number">0x001</span>, _data, _reply, <span class="hljs-number">0</span>);
                _reply.readException();
                _result = _reply.readString();
                txt_result.setText(_result);
                edit_num.setText(<span class="hljs-string">&quot;&quot;</span>);
            }<span class="hljs-keyword">catch</span> (RemoteException e)
            {
                e.printStackTrace();
            } <span class="hljs-keyword">finally</span>
            {
                _reply.recycle();
                _data.recycle();
            }
        }
    }
}
</code></pre>
<p>&#x8FD0;&#x884C;&#x622A;&#x56FE;&#xFF1A;</p>
<p><img src="../img/component-45.jpg" alt=""></p>
<p>&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x4E0D;&#x591A;&#x89E3;&#x91CA;&#x4E86;~&#x7528;&#x5230;&#x81EA;&#x5DF1;&#x6539;&#x6539;&#x5373;&#x53EF;&#xFF01; PS:&#x4EE3;&#x7801;&#x53C2;&#x8003;&#x4E8E;:<a href="http://blog.csdn.net/lmj623565791/article/details/38461079#t9" target="_blank">Android aidl Binder&#x6846;&#x67B6;&#x6D45;&#x6790;</a></p>
<h2 id="&#x4E94;&#x3001;android-50&#x540E;service&#x4E00;&#x4E9B;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x5730;&#x65B9;&#xFF1A;">&#x4E94;&#x3001;Android 5.0&#x540E;Service&#x4E00;&#x4E9B;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x5730;&#x65B9;&#xFF1A;</h2>
<p>&#x4ECA;&#x5929;&#x5728;&#x9690;&#x5F0F;&#x542F;&#x52A8;Service&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9047;&#x5230;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x95EE;&#x9898;  </p>
<p><img src="../img/component-46.jpg" alt=""></p>
<p>&#x7136;&#x540E;&#x7A0B;&#x5E8F;&#x4E00;&#x542F;&#x52A8;&#x5C31;&#x5D29;&#x4E86;,&#x540E;&#x6765;&#x82E6;&#x6263;&#x826F;&#x4E45;&#x624D;&#x53D1;&#x4E0B;&#x662F;Android 5.0&#x60F9;&#x7684;&#x7978;&#xFF0C; &#x539F;&#x6765;5.0&#x540E;&#x6709;&#x4E2A;&#x65B0;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5C31;&#x662F;&#xFF1A; Service Intent must be explitict&#xFF01; &#x597D;&#x5427;&#xFF0C;&#x5C31;&#x662F;&#x4E0D;&#x80FD;&#x9690;&#x5F0F;&#x53BB;&#x542F;&#x52A8;Service&#x54AF;&#xFF0C;&#x89E3;&#x51B3;&#x7684;&#x65B9;&#x6CD5;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF01; &#x6BD4;&#x5982;StartService&#x7684;&#xFF1A;</p>
<p>startService(new Intent(getApplicationContext(), &quot;com.aaa.xxxserver&quot;)); &#x8FD9;&#x6837;&#x5199;&#x7A0B;&#x5E8F;&#x76F4;&#x63A5;crash&#x6389;&#xFF0C;&#x8981;&#x5199;&#x6210;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#xFF1A; startService(new Intent(getApplicationContext(), LoadContactsService.class));</p>
<p>&#x5982;&#x679C;&#x662F;BindService&#x7684;&#xFF1A; Intent service = new Intent(&quot;android.intent.action.AIDLService&quot;); &#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x8981;&#x52A0;&#x4E0A;&#x5305;&#x540D;&#xFF1A; service.setPackage(&quot;com.jay.ipcserver&quot;); &#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;~</p>
<p>&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="http://developer.android.com/intl/zh-cn/guide/components/intents-filters.html#Types" target="_blank">http://developer.android.com/intl/zh-cn/guide/components/intents-filters.html#Types</a> &#x6587;&#x6863;&#x8BF4;&#x660E;&#x5904;:</p>
<p><img src="../img/component-47.jpg" alt=""></p>
<h2 id="&#x516D;&#x3001;&#x672C;&#x8282;&#x5C0F;&#x7ED3;&#xFF1A;">&#x516D;&#x3001;&#x672C;&#x8282;&#x5C0F;&#x7ED3;&#xFF1A;</h2>
<p>&#x597D;&#x7684;&#xFF0C;&#x5173;&#x4E8E;Service&#x7684;&#x6700;&#x540E;&#x4E00;&#x8282;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x672C;&#x8282;&#x8BB2;&#x89E3;&#x4E86;Binder&#x7684;&#x57FA;&#x672C;&#x6982;&#x5FF5;&#x4EE5;&#x53CA;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684; &#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;&#x901A;&#x8FC7;AIDL&#x4EE5;&#x53CA;Binder.onTransact()&#x6765;&#x5B9E;&#x73B0;&#x8DE8;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#xFF01;&#x6700;&#x540E;&#x8FD8;&#x8BB2;&#x89E3;&#x4E86;&#x4E0B;Android 5.0&#x540E; &#x4F7F;&#x7528;Service&#x4E0D;&#x80FD;&#x9690;&#x5F0F;&#x542F;&#x52A8;&#x7684;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF01;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x8C22;&#x8C22;~ </p>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; 54dxs.cn 2020</span><span class="footer-modification">&#x8BE5;&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;:
2019-11-11 20:42:51
</span></footer>        </section>
        <!-- -------------------------------------------------------------正文内容展示区-end--------------------------------------------------------------- -->
        </div>



        <!-- 搜索结果展示-start -->
        <div class="search-results">
            <div class="has-results">
                <h1 class="search-results-title"><span class='search-results-count'></span> 个结果匹配 "<span class='search-query'></span>"</h1>
                <ul class="search-results-list"></ul>
            </div>
            <div class="no-results">
                <h1 class="search-results-title">没有结果匹配 "<span class='search-query'></span>"</h1>
            </div>
        </div>
        <!-- 搜索结果展示-end -->

        </div>
        </div>
        </div>
        </div>

        <a href="service2.html" class="navigation navigation-prev " aria-label="Previous page: Service进阶"><i class="fa fa-angle-left"></i></a>
        <a href="broadcastreceiver.html" class="navigation navigation-next " aria-label="Next page: BroadcastReceiver"><i class="fa fa-angle-right"></i></a>
    </div>
    <!-- 右侧主体内容区-end -->

    <script>
        var gbook = gbook || [];
        gbook.push(function() {
            gbook.page.hasChanged({"page":{"title":"Service精通","level":"5.2.3","depth":2,"next":{"title":"BroadcastReceiver","level":"5.3","depth":1,"path":"doc/component/broadcastreceiver.md","ref":"doc/component/broadcastreceiver.md","articles":[{"title":"BroadcastReceiver牛刀小试","level":"5.3.1","depth":2,"path":"doc/component/broadcastreceiver1.md","ref":"doc/component/broadcastreceiver1.md","articles":[]},{"title":"BroadcastReceiver庖丁解牛","level":"5.3.2","depth":2,"path":"doc/component/broadcastreceiver2.md","ref":"doc/component/broadcastreceiver2.md","articles":[]}]},"previous":{"title":"Service进阶","level":"5.2.2","depth":2,"path":"doc/component/service2.md","ref":"doc/component/service2.md","articles":[]},"dir":"ltr"},"config":{"plugins":["baidutongji","back-to-top","pagefooter","bot"],"root":"./","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"bot":{"dingtalk":{"url":"https://oapi.dingtalk.com/robot/send?access_token=25bd0c5516b29de56f2398fdbe8bf1c99ff7d6925368b152c1cf286cd4640a93","title":"预警类型","at":{"atMobiles":["15010990415","15210550601"],"isAtAll":false}},"weixin":{"url":"https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=472e73bd-9069-45ed-af81-79f43fb4d82e"}},"search":{},"back-to-top":{},"pagefooter":{"copyright":"Copyright &copy 54dxs.cn 2020","modify_label":"该文件修订时间:","modify_format":"yyyy-MM-dd hh:mm:ss"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"baidutongji":{"url":"https://hm.baidu.com/hm.js?576dac27159c64330bc7df555916318e"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"qq":true,"all":["douban","facebook","twitter","instapaper","linkedin"],"douban":false,"facebook":false,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":false,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":true,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true}},"theme":"default","author":"深情小建","gbook":"*","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Android新手入门","language":"zh-hans","links":{"sidebar":{"54大学生[Android频道][面试指南]":"https://android.54dxs.cn/interview/index.html","54大学生[Android频道][新手入门]":"https://android.54dxs.cn/rookie/index.html","54大学生[Android频道][进阶之光]":"https://android.54dxs.cn/advanced/index.html","54大学生[Android频道][项目实战]":"https://android.54dxs.cn/project/index.html"}},"description":"Android新手入门，跟随学习，专注认真，学有所成"},"file":{"path":"doc/component/service3.md","mtime":"2019-11-11T12:42:51.319Z","type":"markdown"},"gbook":{"version":"2.0.1","time":"2020-01-25T08:06:56.981Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>
        <script src="../../gbook/gbook.js"></script>
        <script src="../../gbook/theme.js"></script>
        <script src="../../gbook/gbook-plugin-baidutongji/plugin.js"></script>
        <script src="../../gbook/gbook-plugin-back-to-top/plugin.js"></script>
        <script src="../../gbook/gbook-plugin-bot/plugin.js"></script>
        <script src="../../gbook/gbook-plugin-search/search-engine.js"></script>
        <script src="../../gbook/gbook-plugin-search/search.js"></script>
        <script src="../../gbook/gbook-plugin-lunr/lunr.min.js"></script>
        <script src="../../gbook/gbook-plugin-lunr/search-lunr.js"></script>
        <script src="../../gbook/gbook-plugin-sharing/buttons.js"></script>
        <script src="../../gbook/gbook-plugin-fontsettings/fontsettings.js"></script>
    </body>
</html>

